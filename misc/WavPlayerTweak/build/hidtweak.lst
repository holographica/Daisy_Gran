ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 2
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"hidtweak.cpp"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.rodata._ZN5daisy10WavPlayerT4InitEPKcPsjj.str1.4,"aMS",%progbits,1
  19              		.align	2
  20              	.LC0:
  21 0000 2E776176 		.ascii	".wav\000"
  21      00
  22 0005 000000   		.align	2
  23              	.LC1:
  24 0008 2E574156 		.ascii	".WAV\000"
  24      00
  25 000d 000000   		.align	2
  26              	.LC2:
  27 0010 303A2F00 		.ascii	"0:/\000"
  28              		.align	2
  29              	.LC3:
  30 0014 2F00     		.ascii	"/\000"
  31              		.section	.text._ZN5daisy10WavPlayerT4InitEPKcPsjj,"ax",%progbits
  32              		.align	1
  33              		.p2align 2,,3
  34              		.global	_ZN5daisy10WavPlayerT4InitEPKcPsjj
  35              		.syntax unified
  36              		.thumb
  37              		.thumb_func
  39              	_ZN5daisy10WavPlayerT4InitEPKcPsjj:
  40              	.LVL0:
  41              	.LFB2574:
  42              		.file 1 "hidtweak.cpp"
   1:hidtweak.cpp  **** #include <cstring>
   2:hidtweak.cpp  **** #include "wavplayert.h"
   3:hidtweak.cpp  **** #include "daisy_seed.h"
   4:hidtweak.cpp  **** #include <filesystem>
   5:hidtweak.cpp  **** #include "hid/wavplayer.h"
   6:hidtweak.cpp  **** 
   7:hidtweak.cpp  **** using namespace daisy;
   8:hidtweak.cpp  **** 
   9:hidtweak.cpp  **** FRESULT WavPlayerT::Init(const char *search_path,
  10:hidtweak.cpp  ****                         int16_t    *buffer,
  11:hidtweak.cpp  ****                         size_t      bufferSize,
  12:hidtweak.cpp  ****                         size_t      numChannels)
  13:hidtweak.cpp  **** {
  43              		.loc 1 13 1 view -0
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 2


  44              		.cfi_startproc
  45              		@ args = 4, pretend = 0, frame = 336
  46              		@ frame_needed = 0, uses_anonymous_args = 0
  14:hidtweak.cpp  ****     buff_        = buffer;
  47              		.loc 1 14 5 view .LVU1
  13:hidtweak.cpp  ****     buff_        = buffer;
  48              		.loc 1 13 1 is_stmt 0 view .LVU2
  49 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
  50              		.cfi_def_cfa_offset 28
  51              		.cfi_offset 4, -28
  52              		.cfi_offset 5, -24
  53              		.cfi_offset 6, -20
  54              		.cfi_offset 7, -16
  55              		.cfi_offset 8, -12
  56              		.cfi_offset 9, -8
  57              		.cfi_offset 14, -4
  58 0004 D5B0     		sub	sp, sp, #340
  59              		.cfi_def_cfa_offset 368
  60              		.loc 1 14 18 view .LVU3
  61 0006 0260     		str	r2, [r0]
  15:hidtweak.cpp  ****     bufferSize_  = bufferSize / numChannels;
  62              		.loc 1 15 5 is_stmt 1 view .LVU4
  16:hidtweak.cpp  ****     numChannels_ = numChannels;
  17:hidtweak.cpp  **** 
  18:hidtweak.cpp  ****     // First check for all .wav files, and add them to the list until its full or there are no more
  19:hidtweak.cpp  ****     // Only checks '/'
  20:hidtweak.cpp  ****     FRESULT result = FR_OK;
  21:hidtweak.cpp  ****     FILINFO fno;
  22:hidtweak.cpp  ****     DIR     dir;
  23:hidtweak.cpp  ****     char   *fn;
  24:hidtweak.cpp  ****     file_sel_ = 0;
  63              		.loc 1 24 15 is_stmt 0 view .LVU5
  64 0008 00F54056 		add	r6, r0, #12288
  13:hidtweak.cpp  ****     buff_        = buffer;
  65              		.loc 1 13 1 view .LVU6
  66 000c 0746     		mov	r7, r0
  67 000e 5C9A     		ldr	r2, [sp, #368]
  68              	.LVL1:
  13:hidtweak.cpp  ****     buff_        = buffer;
  69              		.loc 1 13 1 view .LVU7
  70 0010 8946     		mov	r9, r1
  15:hidtweak.cpp  ****     bufferSize_  = bufferSize / numChannels;
  71              		.loc 1 15 31 view .LVU8
  72 0012 B3FBF2F3 		udiv	r3, r3, r2
  73              	.LVL2:
  15:hidtweak.cpp  ****     bufferSize_  = bufferSize / numChannels;
  74              		.loc 1 15 18 view .LVU9
  75 0016 C0E90132 		strd	r3, r2, [r0, #4]
  16:hidtweak.cpp  ****     numChannels_ = numChannels;
  76              		.loc 1 16 5 is_stmt 1 view .LVU10
  20:hidtweak.cpp  ****     FILINFO fno;
  77              		.loc 1 20 5 view .LVU11
  78              	.LVL3:
  21:hidtweak.cpp  ****     DIR     dir;
  79              		.loc 1 21 5 view .LVU12
  22:hidtweak.cpp  ****     char   *fn;
  80              		.loc 1 22 5 view .LVU13
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 3


  23:hidtweak.cpp  ****     file_sel_ = 0;
  81              		.loc 1 23 5 view .LVU14
  82              		.loc 1 24 5 view .LVU15
  83              		.loc 1 24 15 is_stmt 0 view .LVU16
  84 001a 0023     		movs	r3, #0
  25:hidtweak.cpp  ****     file_cnt_ = 0;
  26:hidtweak.cpp  ****     playing_  = false;
  27:hidtweak.cpp  ****     looping_  = false;
  28:hidtweak.cpp  **** 
  29:hidtweak.cpp  ****     // Open Dir and scan for files.
  30:hidtweak.cpp  ****     result = f_opendir(&dir, search_path);
  85              		.loc 1 30 23 view .LVU17
  86 001c 02A8     		add	r0, sp, #8
  87              	.LVL4:
  24:hidtweak.cpp  ****     file_cnt_ = 0;
  88              		.loc 1 24 15 view .LVU18
  89 001e C6F8F038 		str	r3, [r6, #2288]
  25:hidtweak.cpp  ****     file_cnt_ = 0;
  90              		.loc 1 25 5 is_stmt 1 view .LVU19
  25:hidtweak.cpp  ****     file_cnt_ = 0;
  91              		.loc 1 25 15 is_stmt 0 view .LVU20
  92 0022 C6F8EC38 		str	r3, [r6, #2284]
  26:hidtweak.cpp  ****     looping_  = false;
  93              		.loc 1 26 5 is_stmt 1 view .LVU21
  27:hidtweak.cpp  **** 
  94              		.loc 1 27 5 view .LVU22
  27:hidtweak.cpp  **** 
  95              		.loc 1 27 15 is_stmt 0 view .LVU23
  96 0026 A6F80039 		strh	r3, [r6, #2304]	@ movhi
  97              		.loc 1 30 5 is_stmt 1 view .LVU24
  98              		.loc 1 30 23 is_stmt 0 view .LVU25
  99 002a FFF7FEFF 		bl	f_opendir
 100              	.LVL5:
  31:hidtweak.cpp  ****     if(result != FR_OK)
 101              		.loc 1 31 5 is_stmt 1 view .LVU26
 102 002e 0446     		mov	r4, r0
 103 0030 0028     		cmp	r0, #0
 104 0032 61D1     		bne	.L2
 105              	.LVL6:
 106              	.L3:
  32:hidtweak.cpp  ****     {
  33:hidtweak.cpp  ****         return result;
  34:hidtweak.cpp  ****     }
  35:hidtweak.cpp  **** 
  36:hidtweak.cpp  ****     do
 107              		.loc 1 36 5 view .LVU27
  37:hidtweak.cpp  ****     {
  38:hidtweak.cpp  ****         result = f_readdir(&dir, &fno);
 108              		.loc 1 38 9 view .LVU28
 109              		.loc 1 38 27 is_stmt 0 view .LVU29
 110 0034 0EA9     		add	r1, sp, #56
 111 0036 02A8     		add	r0, sp, #8
 112 0038 FFF7FEFF 		bl	f_readdir
 113              	.LVL7:
  39:hidtweak.cpp  ****         // Exit if bad read or NULL fname
  40:hidtweak.cpp  ****         if(result != FR_OK || fno.fname[0] == 0)
  41:hidtweak.cpp  ****             break;
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 4


  42:hidtweak.cpp  ****         // Skip if its a directory or a hidden file.
  43:hidtweak.cpp  ****         if(fno.fattrib & (AM_HID | AM_DIR))
 114              		.loc 1 43 9 is_stmt 1 view .LVU30
  44:hidtweak.cpp  ****             continue;
  45:hidtweak.cpp  ****         // Now we'll check if its .wav and add to the list.
  46:hidtweak.cpp  ****         fn = fno.fname;
 115              		.loc 1 46 9 view .LVU31
  47:hidtweak.cpp  ****         if(file_cnt_ < kMaxFiles - 1)
 116              		.loc 1 47 9 view .LVU32
  48:hidtweak.cpp  ****         {
  49:hidtweak.cpp  ****             if(strstr(fn, ".wav") || strstr(fn, ".WAV"))
 117              		.loc 1 49 13 view .LVU33
  38:hidtweak.cpp  ****         // Exit if bad read or NULL fname
 118              		.loc 1 38 27 is_stmt 0 view .LVU34
 119 003c 0446     		mov	r4, r0
 120              	.LVL8:
  40:hidtweak.cpp  ****             break;
 121              		.loc 1 40 9 is_stmt 1 view .LVU35
  50:hidtweak.cpp  ****             {
  51:hidtweak.cpp  ****                 strcpy(file_info_[file_cnt_].name, fn);
 122              		.loc 1 51 46 is_stmt 0 view .LVU36
 123 003e 4FF40C78 		mov	r8, #560
  49:hidtweak.cpp  ****             {
 124              		.loc 1 49 22 view .LVU37
 125 0042 4849     		ldr	r1, .L29
 126 0044 0DF14E00 		add	r0, sp, #78
 127              	.LVL9:
  40:hidtweak.cpp  ****             break;
 128              		.loc 1 40 9 view .LVU38
 129 0048 002C     		cmp	r4, #0
 130 004a 59D1     		bne	.L4
  40:hidtweak.cpp  ****             break;
 131              		.loc 1 40 42 discriminator 1 view .LVU39
 132 004c 9DF84E40 		ldrb	r4, [sp, #78]	@ zero_extendqisi2
 133              	.LVL10:
  40:hidtweak.cpp  ****             break;
 134              		.loc 1 40 28 discriminator 1 view .LVU40
 135 0050 002C     		cmp	r4, #0
 136 0052 55D0     		beq	.L4
 137 0054 9DF84040 		ldrb	r4, [sp, #64]	@ zero_extendqisi2
  43:hidtweak.cpp  ****             continue;
 138              		.loc 1 43 9 view .LVU41
 139 0058 14F01204 		ands	r4, r4, #18
 140 005c EAD1     		bne	.L3
  47:hidtweak.cpp  ****         {
 141              		.loc 1 47 12 view .LVU42
 142 005e D6F8EC58 		ldr	r5, [r6, #2284]
  47:hidtweak.cpp  ****         {
 143              		.loc 1 47 9 view .LVU43
 144 0062 182D     		cmp	r5, #24
 145 0064 4CD8     		bhi	.L4
  49:hidtweak.cpp  ****             {
 146              		.loc 1 49 22 view .LVU44
 147 0066 FFF7FEFF 		bl	strstr
 148              	.LVL11:
  49:hidtweak.cpp  ****             {
 149              		.loc 1 49 22 view .LVU45
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 5


 150 006a 0346     		mov	r3, r0
  49:hidtweak.cpp  ****             {
 151              		.loc 1 49 44 view .LVU46
 152 006c 3E49     		ldr	r1, .L29+4
 153 006e 0DF14E00 		add	r0, sp, #78
 154              	.LVL12:
  49:hidtweak.cpp  ****             {
 155              		.loc 1 49 13 view .LVU47
 156 0072 3BB3     		cbz	r3, .L27
 157              	.LVL13:
 158              	.L6:
 159              		.loc 1 51 17 is_stmt 1 view .LVU48
 160              		.loc 1 51 46 is_stmt 0 view .LVU49
 161 0074 08FB0575 		mla	r5, r8, r5, r7
 162              		.loc 1 51 23 view .LVU50
 163 0078 0DF14E01 		add	r1, sp, #78
 164              	.LVL14:
 165              		.loc 1 51 23 view .LVU51
 166 007c 05F13800 		add	r0, r5, #56
 167 0080 FFF7FEFF 		bl	strcpy
 168              	.LVL15:
  52:hidtweak.cpp  ****                 strcpy(file_info_[file_cnt_].path, search_path);
 169              		.loc 1 52 17 is_stmt 1 view .LVU52
 170              		.loc 1 52 46 is_stmt 0 view .LVU53
 171 0084 D6F8EC08 		ldr	r0, [r6, #2284]
 172              		.loc 1 52 23 view .LVU54
 173 0088 4946     		mov	r1, r9
 174              		.loc 1 52 46 view .LVU55
 175 008a 08FB0070 		mla	r0, r8, r0, r7
 176              		.loc 1 52 23 view .LVU56
 177 008e 00F59C70 		add	r0, r0, #312
 178 0092 FFF7FEFF 		bl	strcpy
 179              	.LVL16:
  53:hidtweak.cpp  **** 
  54:hidtweak.cpp  ****                 // add an extra slash for non-root directories
  55:hidtweak.cpp  ****                 if(strcmp(search_path, "0:/") != 0)
 180              		.loc 1 55 17 is_stmt 1 view .LVU57
 181              		.loc 1 55 26 is_stmt 0 view .LVU58
 182 0096 3549     		ldr	r1, .L29+8
 183 0098 4846     		mov	r0, r9
 184 009a FFF7FEFF 		bl	strcmp
 185              	.LVL17:
 186              		.loc 1 55 17 view .LVU59
 187 009e B0B9     		cbnz	r0, .L28
 188              	.L7:
  56:hidtweak.cpp  ****                 {
  57:hidtweak.cpp  ****                     strcat(file_info_[file_cnt_].path, "/");
  58:hidtweak.cpp  ****                 }
  59:hidtweak.cpp  **** 
  60:hidtweak.cpp  ****                 strcat(file_info_[file_cnt_].path, fn);
 189              		.loc 1 60 17 is_stmt 1 view .LVU60
 190              		.loc 1 60 46 is_stmt 0 view .LVU61
 191 00a0 4FF40C73 		mov	r3, #560
 192 00a4 D6F8EC08 		ldr	r0, [r6, #2284]
 193              		.loc 1 60 23 view .LVU62
 194 00a8 0DF14E01 		add	r1, sp, #78
 195              	.LVL18:
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 6


 196              		.loc 1 60 46 view .LVU63
 197 00ac 03FB0070 		mla	r0, r3, r0, r7
 198              		.loc 1 60 23 view .LVU64
 199 00b0 00F59C70 		add	r0, r0, #312
 200 00b4 FFF7FEFF 		bl	strcat
 201              	.LVL19:
  61:hidtweak.cpp  ****                 file_cnt_++;
 202              		.loc 1 61 17 is_stmt 1 view .LVU65
 203              		.loc 1 61 26 is_stmt 0 view .LVU66
 204 00b8 D6F8EC38 		ldr	r3, [r6, #2284]
 205 00bc 0133     		adds	r3, r3, #1
 206 00be C6F8EC38 		str	r3, [r6, #2284]
 207 00c2 B7E7     		b	.L3
 208              	.LVL20:
 209              	.L27:
  49:hidtweak.cpp  ****             {
 210              		.loc 1 49 44 discriminator 1 view .LVU67
 211 00c4 FFF7FEFF 		bl	strstr
 212              	.LVL21:
  49:hidtweak.cpp  ****             {
 213              		.loc 1 49 35 discriminator 1 view .LVU68
 214 00c8 0028     		cmp	r0, #0
 215 00ca D3D1     		bne	.L6
 216 00cc B2E7     		b	.L3
 217              	.L28:
  57:hidtweak.cpp  ****                 }
 218              		.loc 1 57 21 is_stmt 1 view .LVU69
  57:hidtweak.cpp  ****                 }
 219              		.loc 1 57 50 is_stmt 0 view .LVU70
 220 00ce D6F8EC38 		ldr	r3, [r6, #2284]
 221 00d2 08FB0378 		mla	r8, r8, r3, r7
 222 00d6 08F59C78 		add	r8, r8, #312
  57:hidtweak.cpp  ****                 }
 223              		.loc 1 57 27 view .LVU71
 224 00da 4046     		mov	r0, r8
 225 00dc FFF7FEFF 		bl	strlen
 226              	.LVL22:
 227 00e0 234B     		ldr	r3, .L29+12
 228 00e2 1B88     		ldrh	r3, [r3]	@ unaligned
 229 00e4 28F80030 		strh	r3, [r8, r0]	@ unaligned
 230 00e8 DAE7     		b	.L7
 231              	.LVL23:
 232              	.L8:
  62:hidtweak.cpp  ****                 // For now lets break anyway to test.
  63:hidtweak.cpp  ****                 //                break;
  64:hidtweak.cpp  ****             }
  65:hidtweak.cpp  ****         }
  66:hidtweak.cpp  ****         else
  67:hidtweak.cpp  ****         {
  68:hidtweak.cpp  ****             break;
  69:hidtweak.cpp  ****         }
  70:hidtweak.cpp  ****     } while(result == FR_OK);
  71:hidtweak.cpp  ****     f_closedir(&dir);
  72:hidtweak.cpp  ****     // Now we'll go through each file and load the WavInfo.
  73:hidtweak.cpp  ****     for(size_t i = 0; i < file_cnt_; i++)
  74:hidtweak.cpp  ****     {
  75:hidtweak.cpp  ****         size_t bytesread;
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 7


  76:hidtweak.cpp  ****         if(f_open(&fil_, file_info_[i].path, (FA_OPEN_EXISTING | FA_READ))
  77:hidtweak.cpp  ****            == FR_OK)
  78:hidtweak.cpp  ****         {
  79:hidtweak.cpp  ****             // Populate the WAV Info
  80:hidtweak.cpp  ****             result = f_read(&fil_,
  81:hidtweak.cpp  ****                             (void *)&file_info_[i].raw_data,
  82:hidtweak.cpp  ****                             sizeof(WAV_FormatTypeDef),
  83:hidtweak.cpp  ****                             &bytesread);
  84:hidtweak.cpp  ****             if(result != FR_OK)
  85:hidtweak.cpp  ****             {
  86:hidtweak.cpp  ****                 // Maybe add return type
  87:hidtweak.cpp  ****                 return result;
  88:hidtweak.cpp  ****             }
  89:hidtweak.cpp  **** 
  90:hidtweak.cpp  ****             // add length
  91:hidtweak.cpp  ****             file_info_[i].length = file_info_[i].raw_data.FileSize 
  92:hidtweak.cpp  ****                                  - file_info_[i].raw_data.SubChunk1Size
  93:hidtweak.cpp  ****                                  - sizeof(WAV_FormatTypeDef);
  94:hidtweak.cpp  **** 
  95:hidtweak.cpp  ****             file_info_[i].length /= 2;                  // 16-bit
  96:hidtweak.cpp  **** 
  97:hidtweak.cpp  ****             f_close(&fil_);
  98:hidtweak.cpp  ****         }
  99:hidtweak.cpp  ****     }
 100:hidtweak.cpp  **** 
 101:hidtweak.cpp  ****     // initialize at Nothing
 102:hidtweak.cpp  ****     buff_state_ = BUFFER_STATE_IDLE;
 233              		.loc 1 102 5 is_stmt 1 view .LVU72
 234              		.loc 1 102 17 is_stmt 0 view .LVU73
 235 00ea 0023     		movs	r3, #0
 236 00ec 86F8F438 		strb	r3, [r6, #2292]
 103:hidtweak.cpp  ****     read_ptr_ = read_ptr_abs_ = 0;
 237              		.loc 1 103 5 is_stmt 1 view .LVU74
 238              		.loc 1 103 31 is_stmt 0 view .LVU75
 239 00f0 C6F8FC38 		str	r3, [r6, #2300]
 240              		.loc 1 103 15 view .LVU76
 241 00f4 C6F8F838 		str	r3, [r6, #2296]
 104:hidtweak.cpp  **** 
 105:hidtweak.cpp  ****     return result;
 242              		.loc 1 105 5 is_stmt 1 view .LVU77
 243              	.LVL24:
 244              	.L2:
 106:hidtweak.cpp  **** }
 245              		.loc 1 106 1 is_stmt 0 view .LVU78
 246 00f8 2046     		mov	r0, r4
 247 00fa 55B0     		add	sp, sp, #340
 248              		.cfi_remember_state
 249              		.cfi_def_cfa_offset 28
 250              		@ sp needed
 251 00fc BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 252              	.LVL25:
 253              	.L4:
 254              		.cfi_restore_state
  71:hidtweak.cpp  ****     // Now we'll go through each file and load the WavInfo.
 255              		.loc 1 71 5 is_stmt 1 view .LVU79
  71:hidtweak.cpp  ****     // Now we'll go through each file and load the WavInfo.
 256              		.loc 1 71 15 is_stmt 0 view .LVU80
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 8


 257 0100 02A8     		add	r0, sp, #8
 258              	.LVL26:
  71:hidtweak.cpp  ****     // Now we'll go through each file and load the WavInfo.
 259              		.loc 1 71 15 view .LVU81
 260 0102 FFF7FEFF 		bl	f_closedir
 261              	.LVL27:
  73:hidtweak.cpp  ****     {
 262              		.loc 1 73 5 is_stmt 1 view .LVU82
 263              	.LBB3:
  73:hidtweak.cpp  ****     {
 264              		.loc 1 73 25 view .LVU83
 265 0106 D6F8EC38 		ldr	r3, [r6, #2284]
 266 010a 002B     		cmp	r3, #0
 267 010c EDD0     		beq	.L8
 268              	.LBB4:
  76:hidtweak.cpp  ****            == FR_OK)
 269              		.loc 1 76 18 is_stmt 0 view .LVU84
 270 010e 43F60418 		movw	r8, #14596
 271 0112 07F10C05 		add	r5, r7, #12
 272 0116 B844     		add	r8, r8, r7
 273              	.LBE4:
  73:hidtweak.cpp  ****     {
 274              		.loc 1 73 16 view .LVU85
 275 0118 0027     		movs	r7, #0
 276              	.LVL28:
  73:hidtweak.cpp  ****     {
 277              		.loc 1 73 16 view .LVU86
 278 011a 05E0     		b	.L11
 279              	.LVL29:
 280              	.L9:
  73:hidtweak.cpp  ****     {
 281              		.loc 1 73 5 is_stmt 1 view .LVU87
  73:hidtweak.cpp  ****     {
 282              		.loc 1 73 25 view .LVU88
 283 011c D6F8EC38 		ldr	r3, [r6, #2284]
 284 0120 05F50C75 		add	r5, r5, #560
 285 0124 BB42     		cmp	r3, r7
 286 0126 E0D9     		bls	.L8
 287              	.LVL30:
 288              	.L11:
 289              	.LBB5:
  75:hidtweak.cpp  ****         if(f_open(&fil_, file_info_[i].path, (FA_OPEN_EXISTING | FA_READ))
 290              		.loc 1 75 9 view .LVU89
  76:hidtweak.cpp  ****            == FR_OK)
 291              		.loc 1 76 9 view .LVU90
  76:hidtweak.cpp  ****            == FR_OK)
 292              		.loc 1 76 18 is_stmt 0 view .LVU91
 293 0128 05F59671 		add	r1, r5, #300
 294 012c 0122     		movs	r2, #1
 295 012e 4046     		mov	r0, r8
 296              	.LBE5:
  73:hidtweak.cpp  ****     {
 297              		.loc 1 73 5 view .LVU92
 298 0130 0137     		adds	r7, r7, #1
 299              	.LVL31:
 300              	.LBB6:
  76:hidtweak.cpp  ****            == FR_OK)
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 9


 301              		.loc 1 76 18 view .LVU93
 302 0132 FFF7FEFF 		bl	f_open
 303              	.LVL32:
  76:hidtweak.cpp  ****            == FR_OK)
 304              		.loc 1 76 9 view .LVU94
 305 0136 0028     		cmp	r0, #0
 306 0138 F0D1     		bne	.L9
  80:hidtweak.cpp  ****                             (void *)&file_info_[i].raw_data,
 307              		.loc 1 80 13 is_stmt 1 view .LVU95
  80:hidtweak.cpp  ****                             (void *)&file_info_[i].raw_data,
 308              		.loc 1 80 28 is_stmt 0 view .LVU96
 309 013a 2946     		mov	r1, r5
 310 013c 01AB     		add	r3, sp, #4
 311 013e 2C22     		movs	r2, #44
 312 0140 4046     		mov	r0, r8
 313 0142 FFF7FEFF 		bl	f_read
 314              	.LVL33:
  91:hidtweak.cpp  ****                                  - file_info_[i].raw_data.SubChunk1Size
 315              		.loc 1 91 13 is_stmt 1 view .LVU97
  95:hidtweak.cpp  **** 
 316              		.loc 1 95 13 view .LVU98
  80:hidtweak.cpp  ****                             (void *)&file_info_[i].raw_data,
 317              		.loc 1 80 28 is_stmt 0 view .LVU99
 318 0146 0446     		mov	r4, r0
 319              	.LVL34:
  84:hidtweak.cpp  ****             {
 320              		.loc 1 84 13 is_stmt 1 view .LVU100
  97:hidtweak.cpp  ****         }
 321              		.loc 1 97 20 is_stmt 0 view .LVU101
 322 0148 4046     		mov	r0, r8
  84:hidtweak.cpp  ****             {
 323              		.loc 1 84 13 view .LVU102
 324 014a 002C     		cmp	r4, #0
 325 014c D4D1     		bne	.L2
  93:hidtweak.cpp  **** 
 326              		.loc 1 93 34 view .LVU103
 327 014e 6B68     		ldr	r3, [r5, #4]
 328 0150 2A69     		ldr	r2, [r5, #16]
 329 0152 2C3B     		subs	r3, r3, #44
 330 0154 9B1A     		subs	r3, r3, r2
  95:hidtweak.cpp  **** 
 331              		.loc 1 95 34 view .LVU104
 332 0156 5B08     		lsrs	r3, r3, #1
 333 0158 C5F82C32 		str	r3, [r5, #556]
  97:hidtweak.cpp  ****         }
 334              		.loc 1 97 13 is_stmt 1 view .LVU105
  97:hidtweak.cpp  ****         }
 335              		.loc 1 97 20 is_stmt 0 view .LVU106
 336 015c FFF7FEFF 		bl	f_close
 337              	.LVL35:
 338 0160 DCE7     		b	.L9
 339              	.L30:
 340 0162 00BF     		.align	2
 341              	.L29:
 342 0164 00000000 		.word	.LC0
 343 0168 08000000 		.word	.LC1
 344 016c 10000000 		.word	.LC2
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 10


 345 0170 14000000 		.word	.LC3
 346              	.LBE6:
 347              	.LBE3:
 348              		.cfi_endproc
 349              	.LFE2574:
 351              		.section	.text._ZN5daisy10WavPlayerT5CloseEv,"ax",%progbits
 352              		.align	1
 353              		.p2align 2,,3
 354              		.global	_ZN5daisy10WavPlayerT5CloseEv
 355              		.syntax unified
 356              		.thumb
 357              		.thumb_func
 359              	_ZN5daisy10WavPlayerT5CloseEv:
 360              	.LVL36:
 361              	.LFB2577:
 107:hidtweak.cpp  **** 
 108:hidtweak.cpp  **** 
 109:hidtweak.cpp  **** int WavPlayerT::Open(size_t sel)
 110:hidtweak.cpp  **** {
 111:hidtweak.cpp  ****     if(sel != file_sel_)
 112:hidtweak.cpp  ****     {
 113:hidtweak.cpp  ****         f_close(&fil_);
 114:hidtweak.cpp  ****         file_sel_ = sel < file_cnt_ ? sel : file_cnt_ - 1;
 115:hidtweak.cpp  ****     }
 116:hidtweak.cpp  **** 
 117:hidtweak.cpp  ****     // Set Buffer Position
 118:hidtweak.cpp  ****     if(int result = f_open(
 119:hidtweak.cpp  ****         &fil_, file_info_[file_sel_].path, (FA_OPEN_EXISTING | FA_READ)))
 120:hidtweak.cpp  ****     {
 121:hidtweak.cpp  ****         return result;
 122:hidtweak.cpp  ****     }
 123:hidtweak.cpp  ****     else
 124:hidtweak.cpp  ****     {
 125:hidtweak.cpp  ****         // prepare buffer for reading...
 126:hidtweak.cpp  ****         read_ptr_ = read_ptr_abs_ = 0;
 127:hidtweak.cpp  ****         buff_state_ = BUFFER_STATE_PREPARE_0;
 128:hidtweak.cpp  ****         Restart();
 129:hidtweak.cpp  ****         Prepare();
 130:hidtweak.cpp  **** 
 131:hidtweak.cpp  ****         return result;
 132:hidtweak.cpp  ****     }
 133:hidtweak.cpp  **** }
 134:hidtweak.cpp  **** 
 135:hidtweak.cpp  **** int WavPlayerT::OpenById(const char* id)
 136:hidtweak.cpp  **** {
 137:hidtweak.cpp  ****     // add extension
 138:hidtweak.cpp  ****     // find index based on filename
 139:hidtweak.cpp  ****     int idx = -1;
 140:hidtweak.cpp  ****     for(size_t i = 0; i < kMaxFiles; i++)
 141:hidtweak.cpp  ****     {
 142:hidtweak.cpp  ****         if(strstr(file_info_[i].name, id) != nullptr)
 143:hidtweak.cpp  ****         {
 144:hidtweak.cpp  ****             idx = i;
 145:hidtweak.cpp  ****             break;
 146:hidtweak.cpp  ****         }
 147:hidtweak.cpp  ****     }
 148:hidtweak.cpp  **** 
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 11


 149:hidtweak.cpp  ****     if(idx >= 0)
 150:hidtweak.cpp  ****         return Open(idx);
 151:hidtweak.cpp  ****     else
 152:hidtweak.cpp  ****         return FR_INVALID_NAME;
 153:hidtweak.cpp  **** }
 154:hidtweak.cpp  **** 
 155:hidtweak.cpp  **** int WavPlayerT::Close()
 156:hidtweak.cpp  **** {
 362              		.loc 1 156 1 is_stmt 1 view -0
 363              		.cfi_startproc
 364              		@ args = 0, pretend = 0, frame = 0
 365              		@ frame_needed = 0, uses_anonymous_args = 0
 157:hidtweak.cpp  ****     return f_close(&fil_);
 366              		.loc 1 157 5 view .LVU108
 156:hidtweak.cpp  ****     return f_close(&fil_);
 367              		.loc 1 156 1 is_stmt 0 view .LVU109
 368 0000 08B5     		push	{r3, lr}
 369              		.cfi_def_cfa_offset 8
 370              		.cfi_offset 3, -8
 371              		.cfi_offset 14, -4
 156:hidtweak.cpp  ****     return f_close(&fil_);
 372              		.loc 1 156 1 view .LVU110
 373 0002 0346     		mov	r3, r0
 374              		.loc 1 157 19 view .LVU111
 375 0004 43F60410 		movw	r0, #14596
 376              	.LVL37:
 377              		.loc 1 157 19 view .LVU112
 378 0008 1844     		add	r0, r0, r3
 379 000a FFF7FEFF 		bl	f_close
 380              	.LVL38:
 158:hidtweak.cpp  **** }
 381              		.loc 1 158 1 view .LVU113
 382 000e 08BD     		pop	{r3, pc}
 383              		.cfi_endproc
 384              	.LFE2577:
 386              		.section	.text._ZN5daisy10WavPlayerT6StreamEv,"ax",%progbits
 387              		.align	1
 388              		.p2align 2,,3
 389              		.global	_ZN5daisy10WavPlayerT6StreamEv
 390              		.syntax unified
 391              		.thumb
 392              		.thumb_func
 394              	_ZN5daisy10WavPlayerT6StreamEv:
 395              	.LVL39:
 396              	.LFB2578:
 159:hidtweak.cpp  **** 
 160:hidtweak.cpp  **** int16_t WavPlayerT::Stream()
 161:hidtweak.cpp  **** {
 397              		.loc 1 161 1 is_stmt 1 view -0
 398              		.cfi_startproc
 399              		@ args = 0, pretend = 0, frame = 0
 400              		@ frame_needed = 0, uses_anonymous_args = 0
 162:hidtweak.cpp  ****     int16_t samp;
 401              		.loc 1 162 5 view .LVU115
 163:hidtweak.cpp  ****     if(playing_)
 402              		.loc 1 163 5 view .LVU116
 403              		.loc 1 163 8 is_stmt 0 view .LVU117
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 12


 404 0000 00F5405C 		add	ip, r0, #12288
 161:hidtweak.cpp  ****     int16_t samp;
 405              		.loc 1 161 1 view .LVU118
 406 0004 0346     		mov	r3, r0
 407              		.loc 1 163 5 view .LVU119
 408 0006 9CF80109 		ldrb	r0, [ip, #2305]	@ zero_extendqisi2
 409              	.LVL40:
 410              		.loc 1 163 5 view .LVU120
 411 000a 30B3     		cbz	r0, .L34
 164:hidtweak.cpp  ****     {
 165:hidtweak.cpp  ****         samp = buff_[read_ptr_];
 412              		.loc 1 165 9 is_stmt 1 view .LVU121
 413              		.loc 1 165 22 is_stmt 0 view .LVU122
 414 000c DCF8F828 		ldr	r2, [ip, #2296]
 415              		.loc 1 165 14 view .LVU123
 416 0010 D3E90001 		ldrd	r0, r1, [r3]
 161:hidtweak.cpp  ****     int16_t samp;
 417              		.loc 1 161 1 view .LVU124
 418 0014 10B5     		push	{r4, lr}
 419              		.cfi_def_cfa_offset 8
 420              		.cfi_offset 4, -8
 421              		.cfi_offset 14, -4
 166:hidtweak.cpp  ****         // Increment rpo
 167:hidtweak.cpp  ****         read_ptr_ = (read_ptr_ + 1) % (bufferSize_ * numChannels_);
 422              		.loc 1 167 52 view .LVU125
 423 0016 9C68     		ldr	r4, [r3, #8]
 165:hidtweak.cpp  ****         // Increment rpo
 424              		.loc 1 165 14 view .LVU126
 425 0018 30F91200 		ldrsh	r0, [r0, r2, lsl #1]
 426              	.LVL41:
 427              		.loc 1 167 9 is_stmt 1 view .LVU127
 428              		.loc 1 167 32 is_stmt 0 view .LVU128
 429 001c 0132     		adds	r2, r2, #1
 430              		.loc 1 167 52 view .LVU129
 431 001e 04FB01F1 		mul	r1, r4, r1
 432              		.loc 1 167 37 view .LVU130
 433 0022 B2FBF1FE 		udiv	lr, r2, r1
 434 0026 01FB1E22 		mls	r2, r1, lr, r2
 435              		.loc 1 167 19 view .LVU131
 436 002a CCF8F828 		str	r2, [ip, #2296]
 168:hidtweak.cpp  ****         if(read_ptr_ == 0)
 437              		.loc 1 168 9 is_stmt 1 view .LVU132
 438 002e EAB9     		cbnz	r2, .L35
 169:hidtweak.cpp  ****             buff_state_ = BUFFER_STATE_PREPARE_1;
 439              		.loc 1 169 13 view .LVU133
 440              		.loc 1 169 25 is_stmt 0 view .LVU134
 441 0030 0222     		movs	r2, #2
 442 0032 8CF8F428 		strb	r2, [ip, #2292]
 443              	.L36:
 170:hidtweak.cpp  ****         else if(read_ptr_ == bufferSize_ * numChannels_ / 2)
 171:hidtweak.cpp  ****             buff_state_ = BUFFER_STATE_PREPARE_0;
 172:hidtweak.cpp  **** 
 173:hidtweak.cpp  ****         // absolute pointer
 174:hidtweak.cpp  ****         read_ptr_abs_++;
 444              		.loc 1 174 9 is_stmt 1 view .LVU135
 175:hidtweak.cpp  ****         read_ptr_abs_ %= file_info_[file_sel_].length;
 445              		.loc 1 175 9 view .LVU136
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 13


 446              		.loc 1 175 48 is_stmt 0 view .LVU137
 447 0036 DCF8F048 		ldr	r4, [ip, #2288]
 448 003a 4FF40C71 		mov	r1, #560
 174:hidtweak.cpp  ****         read_ptr_abs_ %= file_info_[file_sel_].length;
 449              		.loc 1 174 22 view .LVU138
 450 003e DCF8FC28 		ldr	r2, [ip, #2300]
 451              		.loc 1 175 48 view .LVU139
 452 0042 04FB0111 		mla	r1, r4, r1, r1
 174:hidtweak.cpp  ****         read_ptr_abs_ %= file_info_[file_sel_].length;
 453              		.loc 1 174 22 view .LVU140
 454 0046 0132     		adds	r2, r2, #1
 455              		.loc 1 175 48 view .LVU141
 456 0048 0B44     		add	r3, r3, r1
 457              	.LVL42:
 458              		.loc 1 175 23 view .LVU142
 459 004a 9B68     		ldr	r3, [r3, #8]
 460 004c B2FBF3F1 		udiv	r1, r2, r3
 461 0050 03FB1122 		mls	r2, r3, r1, r2
 462 0054 CCF8FC28 		str	r2, [ip, #2300]
 176:hidtweak.cpp  ****     }
 177:hidtweak.cpp  ****     else
 178:hidtweak.cpp  ****     {
 179:hidtweak.cpp  ****         samp = 0;
 180:hidtweak.cpp  ****         if(looping_)
 181:hidtweak.cpp  ****             playing_ = true;
 182:hidtweak.cpp  ****     }
 183:hidtweak.cpp  ****     return samp;
 463              		.loc 1 183 5 is_stmt 1 view .LVU143
 184:hidtweak.cpp  **** }
 464              		.loc 1 184 1 is_stmt 0 view .LVU144
 465 0058 10BD     		pop	{r4, pc}
 466              	.LVL43:
 467              	.L34:
 468              		.cfi_def_cfa_offset 0
 469              		.cfi_restore 4
 470              		.cfi_restore 14
 179:hidtweak.cpp  ****         if(looping_)
 471              		.loc 1 179 9 is_stmt 1 view .LVU145
 180:hidtweak.cpp  ****             playing_ = true;
 472              		.loc 1 180 9 view .LVU146
 473 005a 9CF80039 		ldrb	r3, [ip, #2304]	@ zero_extendqisi2
 474              	.LVL44:
 180:hidtweak.cpp  ****             playing_ = true;
 475              		.loc 1 180 9 is_stmt 0 view .LVU147
 476 005e 1BB1     		cbz	r3, .L38
 181:hidtweak.cpp  ****     }
 477              		.loc 1 181 13 is_stmt 1 view .LVU148
 181:hidtweak.cpp  ****     }
 478              		.loc 1 181 22 is_stmt 0 view .LVU149
 479 0060 0123     		movs	r3, #1
 480 0062 8CF80139 		strb	r3, [ip, #2305]
 481 0066 7047     		bx	lr
 482              	.L38:
 179:hidtweak.cpp  ****         if(looping_)
 483              		.loc 1 179 14 view .LVU150
 484 0068 1846     		mov	r0, r3
 485              	.LVL45:
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 14


 183:hidtweak.cpp  **** }
 486              		.loc 1 183 5 is_stmt 1 view .LVU151
 487              		.loc 1 184 1 is_stmt 0 view .LVU152
 488 006a 7047     		bx	lr
 489              	.LVL46:
 490              	.L35:
 491              		.cfi_def_cfa_offset 8
 492              		.cfi_offset 4, -8
 493              		.cfi_offset 14, -4
 170:hidtweak.cpp  ****             buff_state_ = BUFFER_STATE_PREPARE_0;
 494              		.loc 1 170 14 is_stmt 1 view .LVU153
 495 006c B2EB510F 		cmp	r2, r1, lsr #1
 496 0070 E1D1     		bne	.L36
 171:hidtweak.cpp  **** 
 497              		.loc 1 171 13 view .LVU154
 171:hidtweak.cpp  **** 
 498              		.loc 1 171 25 is_stmt 0 view .LVU155
 499 0072 0122     		movs	r2, #1
 500 0074 8CF8F428 		strb	r2, [ip, #2292]
 501 0078 DDE7     		b	.L36
 502              		.cfi_endproc
 503              	.LFE2578:
 505 007a 00BF     		.section	.text._ZN5daisy10WavPlayerT7PrepareEv,"ax",%progbits
 506              		.align	1
 507              		.p2align 2,,3
 508              		.global	_ZN5daisy10WavPlayerT7PrepareEv
 509              		.syntax unified
 510              		.thumb
 511              		.thumb_func
 513              	_ZN5daisy10WavPlayerT7PrepareEv:
 514              	.LVL47:
 515              	.LFB2579:
 185:hidtweak.cpp  **** 
 186:hidtweak.cpp  **** int WavPlayerT::Prepare()
 187:hidtweak.cpp  **** {
 516              		.loc 1 187 1 is_stmt 1 view -0
 517              		.cfi_startproc
 518              		@ args = 0, pretend = 0, frame = 8
 519              		@ frame_needed = 0, uses_anonymous_args = 0
 188:hidtweak.cpp  ****     FRESULT readres = FR_OK;
 520              		.loc 1 188 5 view .LVU157
 189:hidtweak.cpp  **** 
 190:hidtweak.cpp  ****     if(buff_state_ != BUFFER_STATE_IDLE)
 521              		.loc 1 190 5 view .LVU158
 187:hidtweak.cpp  ****     FRESULT readres = FR_OK;
 522              		.loc 1 187 1 is_stmt 0 view .LVU159
 523 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 524              		.cfi_def_cfa_offset 24
 525              		.cfi_offset 4, -24
 526              		.cfi_offset 5, -20
 527              		.cfi_offset 6, -16
 528              		.cfi_offset 7, -12
 529              		.cfi_offset 8, -8
 530              		.cfi_offset 14, -4
 531              	.LBB11:
 532              		.loc 1 190 8 view .LVU160
 533 0004 00F54055 		add	r5, r0, #12288
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 15


 534              	.LBE11:
 187:hidtweak.cpp  ****     FRESULT readres = FR_OK;
 535              		.loc 1 187 1 view .LVU161
 536 0008 82B0     		sub	sp, sp, #8
 537              		.cfi_def_cfa_offset 32
 538              	.LBB18:
 539              		.loc 1 190 8 view .LVU162
 540 000a 95F8F438 		ldrb	r3, [r5, #2292]	@ zero_extendqisi2
 541              		.loc 1 190 5 view .LVU163
 542 000e 33B3     		cbz	r3, .L49
 543 0010 0446     		mov	r4, r0
 544              	.LBB12:
 191:hidtweak.cpp  ****     {
 192:hidtweak.cpp  ****         size_t offset, bytesread, rxsize;
 545              		.loc 1 192 9 is_stmt 1 view .LVU164
 193:hidtweak.cpp  ****         bytesread = 0;
 546              		.loc 1 193 9 view .LVU165
 547              		.loc 1 193 19 is_stmt 0 view .LVU166
 548 0012 0021     		movs	r1, #0
 194:hidtweak.cpp  ****         rxsize    = bufferSize_ * numChannels_ * sizeof(buff_[0]) / 2;
 195:hidtweak.cpp  ****         offset    = buff_state_ == BUFFER_STATE_PREPARE_1
 196:hidtweak.cpp  ****                         ? bufferSize_ * numChannels_ / 2
 549              		.loc 1 196 25 view .LVU167
 550 0014 022B     		cmp	r3, #2
 193:hidtweak.cpp  ****         bytesread = 0;
 551              		.loc 1 193 19 view .LVU168
 552 0016 0191     		str	r1, [sp, #4]
 194:hidtweak.cpp  ****         rxsize    = bufferSize_ * numChannels_ * sizeof(buff_[0]) / 2;
 553              		.loc 1 194 9 is_stmt 1 view .LVU169
 194:hidtweak.cpp  ****         rxsize    = bufferSize_ * numChannels_ * sizeof(buff_[0]) / 2;
 554              		.loc 1 194 33 is_stmt 0 view .LVU170
 555 0018 D0E90102 		ldrd	r0, r2, [r0, #4]
 556              	.LVL48:
 194:hidtweak.cpp  ****         rxsize    = bufferSize_ * numChannels_ * sizeof(buff_[0]) / 2;
 557              		.loc 1 194 33 view .LVU171
 558 001c 02FB00F0 		mul	r0, r2, r0
 194:hidtweak.cpp  ****         rxsize    = bufferSize_ * numChannels_ * sizeof(buff_[0]) / 2;
 559              		.loc 1 194 19 view .LVU172
 560 0020 20F00046 		bic	r6, r0, #-2147483648
 561              	.LVL49:
 195:hidtweak.cpp  ****                         ? bufferSize_ * numChannels_ / 2
 562              		.loc 1 195 9 is_stmt 1 view .LVU173
 563              		.loc 1 196 25 is_stmt 0 view .LVU174
 564 0024 29D0     		beq	.L52
 565 0026 0F46     		mov	r7, r1
 566              	.L45:
 567              	.LVL50:
 197:hidtweak.cpp  ****                         : 0;
 198:hidtweak.cpp  **** 
 199:hidtweak.cpp  ****         readres = f_read(&fil_, &buff_[offset], rxsize, &bytesread);
 568              		.loc 1 199 9 is_stmt 1 view .LVU175
 569              		.loc 1 199 25 is_stmt 0 view .LVU176
 570 0028 43F60418 		movw	r8, #14596
 571              		.loc 1 199 33 view .LVU177
 572 002c 2368     		ldr	r3, [r4]
 573              		.loc 1 199 25 view .LVU178
 574 002e 3246     		mov	r2, r6
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 16


 575 0030 A044     		add	r8, r8, r4
 576 0032 1944     		add	r1, r1, r3
 577 0034 01AB     		add	r3, sp, #4
 578 0036 4046     		mov	r0, r8
 579 0038 FFF7FEFF 		bl	f_read
 580              	.LVL51:
 200:hidtweak.cpp  **** 
 201:hidtweak.cpp  ****         if(bytesread < rxsize || f_eof(&fil_))
 581              		.loc 1 201 9 view .LVU179
 582 003c 019A     		ldr	r2, [sp, #4]
 199:hidtweak.cpp  **** 
 583              		.loc 1 199 25 view .LVU180
 584 003e 0346     		mov	r3, r0
 585              	.LVL52:
 586              		.loc 1 201 9 is_stmt 1 view .LVU181
 587 0040 B242     		cmp	r2, r6
 588 0042 10D3     		bcc	.L46
 589              		.loc 1 201 31 is_stmt 0 discriminator 1 view .LVU182
 590 0044 D5F81819 		ldr	r1, [r5, #2328]
 591 0048 D5F81029 		ldr	r2, [r5, #2320]
 592 004c 9142     		cmp	r1, r2
 593 004e 0AD0     		beq	.L46
 202:hidtweak.cpp  ****         {
 203:hidtweak.cpp  ****             if(looping_)
 204:hidtweak.cpp  ****             {
 205:hidtweak.cpp  ****                 Restart();
 206:hidtweak.cpp  ****                 readres = f_read(&fil_,
 207:hidtweak.cpp  ****                                  &buff_[offset + (bytesread / 2)],
 208:hidtweak.cpp  ****                                  rxsize - bytesread,
 209:hidtweak.cpp  ****                                  &bytesread);
 210:hidtweak.cpp  ****             }
 211:hidtweak.cpp  ****             else
 212:hidtweak.cpp  ****             {
 213:hidtweak.cpp  ****                 playing_ = false;
 214:hidtweak.cpp  ****             }
 215:hidtweak.cpp  ****         }
 216:hidtweak.cpp  ****         buff_state_ = BUFFER_STATE_IDLE;
 594              		.loc 1 216 9 is_stmt 1 view .LVU183
 595              		.loc 1 216 21 is_stmt 0 view .LVU184
 596 0050 0022     		movs	r2, #0
 597              	.LBE12:
 598              	.LBE18:
 217:hidtweak.cpp  ****     }
 218:hidtweak.cpp  **** 
 219:hidtweak.cpp  ****     return readres;
 599              		.loc 1 219 12 view .LVU185
 600 0052 1846     		mov	r0, r3
 601              	.LBB19:
 602              	.LBB15:
 216:hidtweak.cpp  ****     }
 603              		.loc 1 216 21 view .LVU186
 604 0054 85F8F428 		strb	r2, [r5, #2292]
 605              	.LVL53:
 606              	.L54:
 216:hidtweak.cpp  ****     }
 607              		.loc 1 216 21 view .LVU187
 608              	.LBE15:
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 17


 609              	.LBE19:
 220:hidtweak.cpp  **** }
 610              		.loc 1 220 1 view .LVU188
 611 0058 02B0     		add	sp, sp, #8
 612              		.cfi_remember_state
 613              		.cfi_def_cfa_offset 24
 614              		@ sp needed
 615 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 616              	.LVL54:
 617              	.L49:
 618              		.cfi_restore_state
 619              	.LBB20:
 620              		.loc 1 220 1 view .LVU189
 621 005e 1846     		mov	r0, r3
 622              	.LVL55:
 623              		.loc 1 220 1 view .LVU190
 624              	.LBE20:
 219:hidtweak.cpp  **** }
 625              		.loc 1 219 5 is_stmt 1 view .LVU191
 626              		.loc 1 220 1 is_stmt 0 view .LVU192
 627 0060 02B0     		add	sp, sp, #8
 628              		.cfi_remember_state
 629              		.cfi_def_cfa_offset 24
 630              		@ sp needed
 631 0062 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 632              	.LVL56:
 633              	.L46:
 634              		.cfi_restore_state
 635              	.LBB21:
 636              	.LBB16:
 203:hidtweak.cpp  ****             {
 637              		.loc 1 203 13 is_stmt 1 view .LVU193
 638 0066 95F80029 		ldrb	r2, [r5, #2304]	@ zero_extendqisi2
 639 006a 52B9     		cbnz	r2, .L53
 213:hidtweak.cpp  ****             }
 640              		.loc 1 213 17 view .LVU194
 213:hidtweak.cpp  ****             }
 641              		.loc 1 213 26 is_stmt 0 view .LVU195
 642 006c 85F80129 		strb	r2, [r5, #2305]
 216:hidtweak.cpp  ****     }
 643              		.loc 1 216 9 is_stmt 1 view .LVU196
 216:hidtweak.cpp  ****     }
 644              		.loc 1 216 21 is_stmt 0 view .LVU197
 645 0070 0022     		movs	r2, #0
 646              	.LBE16:
 647              	.LBE21:
 219:hidtweak.cpp  **** }
 648              		.loc 1 219 12 view .LVU198
 649 0072 1846     		mov	r0, r3
 650              	.LBB22:
 651              	.LBB17:
 216:hidtweak.cpp  ****     }
 652              		.loc 1 216 21 view .LVU199
 653 0074 85F8F428 		strb	r2, [r5, #2292]
 654 0078 EEE7     		b	.L54
 655              	.LVL57:
 656              	.L52:
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 18


 196:hidtweak.cpp  ****                         : 0;
 657              		.loc 1 196 25 discriminator 1 view .LVU200
 658 007a 4708     		lsrs	r7, r0, #1
 199:hidtweak.cpp  **** 
 659              		.loc 1 199 46 discriminator 1 view .LVU201
 660 007c 20F00101 		bic	r1, r0, #1
 661 0080 D2E7     		b	.L45
 662              	.LVL58:
 663              	.L53:
 205:hidtweak.cpp  ****                 readres = f_read(&fil_,
 664              		.loc 1 205 17 is_stmt 1 view .LVU202
 665              	.LBB13:
 666              	.LBI13:
 221:hidtweak.cpp  **** 
 222:hidtweak.cpp  **** void WavPlayerT::Restart()
 667              		.loc 1 222 6 view .LVU203
 668              	.LBB14:
 223:hidtweak.cpp  **** {
 224:hidtweak.cpp  ****     f_lseek(&fil_,
 669              		.loc 1 224 5 view .LVU204
 225:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 226:hidtweak.cpp  ****                 + file_info_[file_sel_].raw_data.SubChunk1Size);
 670              		.loc 1 226 50 is_stmt 0 view .LVU205
 671 0082 4FF40C72 		mov	r2, #560
 672 0086 D5F8F038 		ldr	r3, [r5, #2288]
 673              	.LVL59:
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 674              		.loc 1 224 12 view .LVU206
 675 008a 4046     		mov	r0, r8
 676              		.loc 1 226 50 view .LVU207
 677 008c 02FB0343 		mla	r3, r2, r3, r4
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 678              		.loc 1 224 12 view .LVU208
 679 0090 D969     		ldr	r1, [r3, #28]
 680 0092 2C31     		adds	r1, r1, #44
 681 0094 FFF7FEFF 		bl	f_lseek
 682              	.LVL60:
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 683              		.loc 1 224 12 view .LVU209
 684              	.LBE14:
 685              	.LBE13:
 206:hidtweak.cpp  ****                                  &buff_[offset + (bytesread / 2)],
 686              		.loc 1 206 17 is_stmt 1 view .LVU210
 207:hidtweak.cpp  ****                                  rxsize - bytesread,
 687              		.loc 1 207 61 is_stmt 0 view .LVU211
 688 0098 019A     		ldr	r2, [sp, #4]
 207:hidtweak.cpp  ****                                  rxsize - bytesread,
 689              		.loc 1 207 34 view .LVU212
 690 009a 2168     		ldr	r1, [r4]
 206:hidtweak.cpp  ****                                  &buff_[offset + (bytesread / 2)],
 691              		.loc 1 206 33 view .LVU213
 692 009c 01AB     		add	r3, sp, #4
 207:hidtweak.cpp  ****                                  rxsize - bytesread,
 693              		.loc 1 207 48 view .LVU214
 694 009e 07EB5207 		add	r7, r7, r2, lsr #1
 695              	.LVL61:
 206:hidtweak.cpp  ****                                  &buff_[offset + (bytesread / 2)],
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 19


 696              		.loc 1 206 33 view .LVU215
 697 00a2 4046     		mov	r0, r8
 698 00a4 B21A     		subs	r2, r6, r2
 699 00a6 01EB4701 		add	r1, r1, r7, lsl #1
 700 00aa FFF7FEFF 		bl	f_read
 701              	.LVL62:
 216:hidtweak.cpp  ****     }
 702              		.loc 1 216 21 view .LVU216
 703 00ae 0022     		movs	r2, #0
 206:hidtweak.cpp  ****                                  &buff_[offset + (bytesread / 2)],
 704              		.loc 1 206 33 view .LVU217
 705 00b0 0346     		mov	r3, r0
 706              	.LVL63:
 216:hidtweak.cpp  ****     }
 707              		.loc 1 216 9 is_stmt 1 view .LVU218
 216:hidtweak.cpp  ****     }
 708              		.loc 1 216 21 is_stmt 0 view .LVU219
 709 00b2 85F8F428 		strb	r2, [r5, #2292]
 710              	.LBE17:
 711              	.LBE22:
 219:hidtweak.cpp  **** }
 712              		.loc 1 219 12 view .LVU220
 713 00b6 1846     		mov	r0, r3
 714 00b8 CEE7     		b	.L54
 715              		.cfi_endproc
 716              	.LFE2579:
 718 00ba 00BF     		.section	.text._ZN5daisy10WavPlayerT4OpenEj,"ax",%progbits
 719              		.align	1
 720              		.p2align 2,,3
 721              		.global	_ZN5daisy10WavPlayerT4OpenEj
 722              		.syntax unified
 723              		.thumb
 724              		.thumb_func
 726              	_ZN5daisy10WavPlayerT4OpenEj:
 727              	.LVL64:
 728              	.LFB2575:
 110:hidtweak.cpp  ****     if(sel != file_sel_)
 729              		.loc 1 110 1 is_stmt 1 view -0
 730              		.cfi_startproc
 731              		@ args = 0, pretend = 0, frame = 0
 732              		@ frame_needed = 0, uses_anonymous_args = 0
 110:hidtweak.cpp  ****     if(sel != file_sel_)
 733              		.loc 1 110 1 is_stmt 0 view .LVU222
 734 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 735              		.cfi_def_cfa_offset 24
 736              		.cfi_offset 4, -24
 737              		.cfi_offset 5, -20
 738              		.cfi_offset 6, -16
 739              		.cfi_offset 7, -12
 740              		.cfi_offset 8, -8
 741              		.cfi_offset 14, -4
 111:hidtweak.cpp  ****     {
 742              		.loc 1 111 15 view .LVU223
 743 0004 00F54057 		add	r7, r0, #12288
 113:hidtweak.cpp  ****         file_sel_ = sel < file_cnt_ ? sel : file_cnt_ - 1;
 744              		.loc 1 113 16 view .LVU224
 745 0008 43F60416 		movw	r6, #14596
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 20


 110:hidtweak.cpp  ****     if(sel != file_sel_)
 746              		.loc 1 110 1 view .LVU225
 747 000c 0546     		mov	r5, r0
 111:hidtweak.cpp  ****     {
 748              		.loc 1 111 5 is_stmt 1 view .LVU226
 110:hidtweak.cpp  ****     if(sel != file_sel_)
 749              		.loc 1 110 1 is_stmt 0 view .LVU227
 750 000e 0C46     		mov	r4, r1
 111:hidtweak.cpp  ****     {
 751              		.loc 1 111 5 view .LVU228
 752 0010 D7F8F038 		ldr	r3, [r7, #2288]
 113:hidtweak.cpp  ****         file_sel_ = sel < file_cnt_ ? sel : file_cnt_ - 1;
 753              		.loc 1 113 16 view .LVU229
 754 0014 0644     		add	r6, r6, r0
 111:hidtweak.cpp  ****     {
 755              		.loc 1 111 5 view .LVU230
 756 0016 8B42     		cmp	r3, r1
 757 0018 0AD0     		beq	.L57
 113:hidtweak.cpp  ****         file_sel_ = sel < file_cnt_ ? sel : file_cnt_ - 1;
 758              		.loc 1 113 9 is_stmt 1 view .LVU231
 113:hidtweak.cpp  ****         file_sel_ = sel < file_cnt_ ? sel : file_cnt_ - 1;
 759              		.loc 1 113 16 is_stmt 0 view .LVU232
 760 001a 3046     		mov	r0, r6
 761              	.LVL65:
 113:hidtweak.cpp  ****         file_sel_ = sel < file_cnt_ ? sel : file_cnt_ - 1;
 762              		.loc 1 113 16 view .LVU233
 763 001c FFF7FEFF 		bl	f_close
 764              	.LVL66:
 114:hidtweak.cpp  ****     }
 765              		.loc 1 114 9 is_stmt 1 view .LVU234
 114:hidtweak.cpp  ****     }
 766              		.loc 1 114 27 is_stmt 0 view .LVU235
 767 0020 D7F8EC38 		ldr	r3, [r7, #2284]
 114:hidtweak.cpp  ****     }
 768              		.loc 1 114 37 view .LVU236
 769 0024 A342     		cmp	r3, r4
 770 0026 98BF     		it	ls
 771 0028 03F1FF34 		addls	r4, r3, #-1
 772              	.LVL67:
 114:hidtweak.cpp  ****     }
 773              		.loc 1 114 19 view .LVU237
 774 002c C7F8F048 		str	r4, [r7, #2288]
 775              	.L57:
 118:hidtweak.cpp  ****         &fil_, file_info_[file_sel_].path, (FA_OPEN_EXISTING | FA_READ)))
 776              		.loc 1 118 5 is_stmt 1 view .LVU238
 777              	.LBB29:
 119:hidtweak.cpp  ****     {
 778              		.loc 1 119 38 is_stmt 0 view .LVU239
 779 0030 4FF40C78 		mov	r8, #560
 118:hidtweak.cpp  ****         &fil_, file_info_[file_sel_].path, (FA_OPEN_EXISTING | FA_READ)))
 780              		.loc 1 118 27 view .LVU240
 781 0034 0122     		movs	r2, #1
 782 0036 3046     		mov	r0, r6
 119:hidtweak.cpp  ****     {
 783              		.loc 1 119 38 view .LVU241
 784 0038 08FB0451 		mla	r1, r8, r4, r5
 118:hidtweak.cpp  ****         &fil_, file_info_[file_sel_].path, (FA_OPEN_EXISTING | FA_READ)))
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 21


 785              		.loc 1 118 27 view .LVU242
 786 003c 01F59C71 		add	r1, r1, #312
 787 0040 FFF7FEFF 		bl	f_open
 788              	.LVL68:
 118:hidtweak.cpp  ****         &fil_, file_info_[file_sel_].path, (FA_OPEN_EXISTING | FA_READ)))
 789              		.loc 1 118 5 view .LVU243
 790 0044 0446     		mov	r4, r0
 791 0046 10B1     		cbz	r0, .L61
 792              	.LBE29:
 133:hidtweak.cpp  **** 
 793              		.loc 1 133 1 view .LVU244
 794 0048 2046     		mov	r0, r4
 133:hidtweak.cpp  **** 
 795              		.loc 1 133 1 view .LVU245
 796 004a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 797              	.LVL69:
 798              	.L61:
 799              	.LBB30:
 800              	.LBI30:
 109:hidtweak.cpp  **** {
 801              		.loc 1 109 5 is_stmt 1 view .LVU246
 802              	.LBB31:
 126:hidtweak.cpp  ****         buff_state_ = BUFFER_STATE_PREPARE_0;
 803              		.loc 1 126 9 view .LVU247
 804              	.LBB32:
 805              	.LBB33:
 806              		.loc 1 226 50 is_stmt 0 view .LVU248
 807 004e D7F8F038 		ldr	r3, [r7, #2288]
 808              	.LBE33:
 809              	.LBE32:
 126:hidtweak.cpp  ****         buff_state_ = BUFFER_STATE_PREPARE_0;
 810              		.loc 1 126 35 view .LVU249
 811 0052 C7F8FC08 		str	r0, [r7, #2300]
 812              	.LBB38:
 813              	.LBB34:
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 814              		.loc 1 224 12 view .LVU250
 815 0056 3046     		mov	r0, r6
 816              	.LVL70:
 817              		.loc 1 226 50 view .LVU251
 818 0058 08FB0353 		mla	r3, r8, r3, r5
 819              	.LBE34:
 820              	.LBE38:
 126:hidtweak.cpp  ****         buff_state_ = BUFFER_STATE_PREPARE_0;
 821              		.loc 1 126 19 view .LVU252
 822 005c C7F8F848 		str	r4, [r7, #2296]
 127:hidtweak.cpp  ****         Restart();
 823              		.loc 1 127 9 is_stmt 1 view .LVU253
 824              	.LBB39:
 825              	.LBB35:
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 826              		.loc 1 224 12 is_stmt 0 view .LVU254
 827 0060 D969     		ldr	r1, [r3, #28]
 828              	.LBE35:
 829              	.LBE39:
 127:hidtweak.cpp  ****         Restart();
 830              		.loc 1 127 21 view .LVU255
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 22


 831 0062 0123     		movs	r3, #1
 832              	.LBB40:
 833              	.LBB36:
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 834              		.loc 1 224 12 view .LVU256
 835 0064 2C31     		adds	r1, r1, #44
 836              	.LBE36:
 837              	.LBE40:
 127:hidtweak.cpp  ****         Restart();
 838              		.loc 1 127 21 view .LVU257
 839 0066 87F8F438 		strb	r3, [r7, #2292]
 128:hidtweak.cpp  ****         Prepare();
 840              		.loc 1 128 9 is_stmt 1 view .LVU258
 841              	.LVL71:
 842              	.LBB41:
 843              	.LBI32:
 222:hidtweak.cpp  **** {
 844              		.loc 1 222 6 view .LVU259
 845              	.LBB37:
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 846              		.loc 1 224 5 view .LVU260
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 847              		.loc 1 224 12 is_stmt 0 view .LVU261
 848 006a FFF7FEFF 		bl	f_lseek
 849              	.LVL72:
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 850              		.loc 1 224 12 view .LVU262
 851              	.LBE37:
 852              	.LBE41:
 129:hidtweak.cpp  **** 
 853              		.loc 1 129 9 is_stmt 1 view .LVU263
 129:hidtweak.cpp  **** 
 854              		.loc 1 129 16 is_stmt 0 view .LVU264
 855 006e 2846     		mov	r0, r5
 856 0070 FFF7FEFF 		bl	_ZN5daisy10WavPlayerT7PrepareEv
 857              	.LVL73:
 131:hidtweak.cpp  ****     }
 858              		.loc 1 131 9 is_stmt 1 view .LVU265
 131:hidtweak.cpp  ****     }
 859              		.loc 1 131 9 is_stmt 0 view .LVU266
 860              	.LBE31:
 861              	.LBE30:
 133:hidtweak.cpp  **** 
 862              		.loc 1 133 1 view .LVU267
 863 0074 2046     		mov	r0, r4
 864 0076 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 133:hidtweak.cpp  **** 
 865              		.loc 1 133 1 view .LVU268
 866              		.cfi_endproc
 867              	.LFE2575:
 869 007a 00BF     		.section	.text._ZN5daisy10WavPlayerT8OpenByIdEPKc,"ax",%progbits
 870              		.align	1
 871              		.p2align 2,,3
 872              		.global	_ZN5daisy10WavPlayerT8OpenByIdEPKc
 873              		.syntax unified
 874              		.thumb
 875              		.thumb_func
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 23


 877              	_ZN5daisy10WavPlayerT8OpenByIdEPKc:
 878              	.LVL74:
 879              	.LFB2576:
 136:hidtweak.cpp  ****     // add extension
 880              		.loc 1 136 1 is_stmt 1 view -0
 881              		.cfi_startproc
 882              		@ args = 0, pretend = 0, frame = 0
 883              		@ frame_needed = 0, uses_anonymous_args = 0
 139:hidtweak.cpp  ****     for(size_t i = 0; i < kMaxFiles; i++)
 884              		.loc 1 139 5 view .LVU270
 140:hidtweak.cpp  ****     {
 885              		.loc 1 140 5 view .LVU271
 886              	.LBB42:
 140:hidtweak.cpp  ****     {
 887              		.loc 1 140 25 view .LVU272
 888              	.LBE42:
 136:hidtweak.cpp  ****     // add extension
 889              		.loc 1 136 1 is_stmt 0 view .LVU273
 890 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 891              		.cfi_def_cfa_offset 24
 892              		.cfi_offset 3, -24
 893              		.cfi_offset 4, -20
 894              		.cfi_offset 5, -16
 895              		.cfi_offset 6, -12
 896              		.cfi_offset 7, -8
 897              		.cfi_offset 14, -4
 898              	.LBB43:
 140:hidtweak.cpp  ****     {
 899              		.loc 1 140 16 view .LVU274
 900 0002 0025     		movs	r5, #0
 901              	.LBE43:
 136:hidtweak.cpp  ****     // add extension
 902              		.loc 1 136 1 view .LVU275
 903 0004 0746     		mov	r7, r0
 904 0006 0E46     		mov	r6, r1
 905 0008 00F13804 		add	r4, r0, #56
 906 000c 02E0     		b	.L64
 907              	.LVL75:
 908              	.L63:
 909              	.LBB44:
 140:hidtweak.cpp  ****     {
 910              		.loc 1 140 5 discriminator 2 view .LVU276
 911 000e 0135     		adds	r5, r5, #1
 912              	.LVL76:
 140:hidtweak.cpp  ****     {
 913              		.loc 1 140 25 is_stmt 1 discriminator 2 view .LVU277
 914 0010 1A2D     		cmp	r5, #26
 915 0012 0DD0     		beq	.L67
 916              	.LVL77:
 917              	.L64:
 142:hidtweak.cpp  ****         {
 918              		.loc 1 142 9 view .LVU278
 142:hidtweak.cpp  ****         {
 919              		.loc 1 142 18 is_stmt 0 view .LVU279
 920 0014 2046     		mov	r0, r4
 921 0016 3146     		mov	r1, r6
 140:hidtweak.cpp  ****     {
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 24


 922              		.loc 1 140 25 view .LVU280
 923 0018 04F50C74 		add	r4, r4, #560
 142:hidtweak.cpp  ****         {
 924              		.loc 1 142 18 view .LVU281
 925 001c FFF7FEFF 		bl	strstr
 926              	.LVL78:
 140:hidtweak.cpp  ****     {
 927              		.loc 1 140 5 is_stmt 1 view .LVU282
 142:hidtweak.cpp  ****         {
 928              		.loc 1 142 9 is_stmt 0 view .LVU283
 929 0020 0028     		cmp	r0, #0
 930 0022 F4D0     		beq	.L63
 144:hidtweak.cpp  ****             break;
 931              		.loc 1 144 13 is_stmt 1 view .LVU284
 932              	.LVL79:
 145:hidtweak.cpp  ****         }
 933              		.loc 1 145 13 view .LVU285
 145:hidtweak.cpp  ****         }
 934              		.loc 1 145 13 is_stmt 0 view .LVU286
 935              	.LBE44:
 149:hidtweak.cpp  ****         return Open(idx);
 936              		.loc 1 149 5 is_stmt 1 view .LVU287
 150:hidtweak.cpp  ****     else
 937              		.loc 1 150 9 view .LVU288
 150:hidtweak.cpp  ****     else
 938              		.loc 1 150 20 is_stmt 0 view .LVU289
 939 0024 2946     		mov	r1, r5
 940 0026 3846     		mov	r0, r7
 153:hidtweak.cpp  **** 
 941              		.loc 1 153 1 view .LVU290
 942 0028 BDE8F840 		pop	{r3, r4, r5, r6, r7, lr}
 943              		.cfi_remember_state
 944              		.cfi_restore 14
 945              		.cfi_restore 7
 946              		.cfi_restore 6
 947              		.cfi_restore 5
 948              		.cfi_restore 4
 949              		.cfi_restore 3
 950              		.cfi_def_cfa_offset 0
 951              	.LVL80:
 150:hidtweak.cpp  ****     else
 952              		.loc 1 150 20 view .LVU291
 953 002c FFF7FEBF 		b	_ZN5daisy10WavPlayerT4OpenEj
 954              	.LVL81:
 955              	.L67:
 956              		.cfi_restore_state
 153:hidtweak.cpp  **** 
 957              		.loc 1 153 1 view .LVU292
 958 0030 0620     		movs	r0, #6
 959 0032 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 153:hidtweak.cpp  **** 
 960              		.loc 1 153 1 view .LVU293
 961              		.cfi_endproc
 962              	.LFE2576:
 964              		.section	.text._ZN5daisy10WavPlayerT7RestartEv,"ax",%progbits
 965              		.align	1
 966              		.p2align 2,,3
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 25


 967              		.global	_ZN5daisy10WavPlayerT7RestartEv
 968              		.syntax unified
 969              		.thumb
 970              		.thumb_func
 972              	_ZN5daisy10WavPlayerT7RestartEv:
 973              	.LVL82:
 974              	.LFB2580:
 223:hidtweak.cpp  ****     f_lseek(&fil_,
 975              		.loc 1 223 1 is_stmt 1 view -0
 976              		.cfi_startproc
 977              		@ args = 0, pretend = 0, frame = 0
 978              		@ frame_needed = 0, uses_anonymous_args = 0
 979              		@ link register save eliminated.
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 980              		.loc 1 224 5 view .LVU295
 223:hidtweak.cpp  ****     f_lseek(&fil_,
 981              		.loc 1 223 1 is_stmt 0 view .LVU296
 982 0000 0346     		mov	r3, r0
 983              		.loc 1 226 50 view .LVU297
 984 0002 4FF40C71 		mov	r1, #560
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 985              		.loc 1 224 12 view .LVU298
 986 0006 43F60410 		movw	r0, #14596
 987              	.LVL83:
 988              		.loc 1 226 50 view .LVU299
 989 000a 03F54052 		add	r2, r3, #12288
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 990              		.loc 1 224 12 view .LVU300
 991 000e 1844     		add	r0, r0, r3
 992              		.loc 1 226 50 view .LVU301
 993 0010 D2F8F028 		ldr	r2, [r2, #2288]
 994 0014 01FB0233 		mla	r3, r1, r2, r3
 995              	.LVL84:
 224:hidtweak.cpp  ****             sizeof(WAV_FormatTypeDef)
 996              		.loc 1 224 12 view .LVU302
 997 0018 D969     		ldr	r1, [r3, #28]
 998 001a 2C31     		adds	r1, r1, #44
 999 001c FFF7FEBF 		b	f_lseek
 1000              	.LVL85:
 1001              		.cfi_endproc
 1002              	.LFE2580:
 1004              		.section	.text._ZN5daisy10WavPlayerT16GetNextBuffStateEv,"ax",%progbits
 1005              		.align	1
 1006              		.p2align 2,,3
 1007              		.global	_ZN5daisy10WavPlayerT16GetNextBuffStateEv
 1008              		.syntax unified
 1009              		.thumb
 1010              		.thumb_func
 1012              	_ZN5daisy10WavPlayerT16GetNextBuffStateEv:
 1013              	.LVL86:
 1014              	.LFB2581:
 227:hidtweak.cpp  **** }
 228:hidtweak.cpp  **** 
 229:hidtweak.cpp  **** WavPlayerT::BufferState WavPlayerT::GetNextBuffState()
 230:hidtweak.cpp  **** {
 1015              		.loc 1 230 1 is_stmt 1 view -0
 1016              		.cfi_startproc
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 26


 1017              		@ args = 0, pretend = 0, frame = 0
 1018              		@ frame_needed = 0, uses_anonymous_args = 0
 1019              		@ link register save eliminated.
 231:hidtweak.cpp  ****     size_t next_samp;
 1020              		.loc 1 231 5 view .LVU304
 232:hidtweak.cpp  ****     next_samp = (read_ptr_ + 1) % bufferSize_;
 1021              		.loc 1 232 5 view .LVU305
 1022              		.loc 1 232 18 is_stmt 0 view .LVU306
 1023 0000 00F54053 		add	r3, r0, #12288
 1024              		.loc 1 232 35 view .LVU307
 1025 0004 4268     		ldr	r2, [r0, #4]
 1026              	.LVL87:
 233:hidtweak.cpp  ****     if(next_samp < bufferSize_ / 2)
 1027              		.loc 1 233 5 is_stmt 1 view .LVU308
 232:hidtweak.cpp  ****     next_samp = (read_ptr_ + 1) % bufferSize_;
 1028              		.loc 1 232 28 is_stmt 0 view .LVU309
 1029 0006 D3F8F838 		ldr	r3, [r3, #2296]
 1030 000a 0133     		adds	r3, r3, #1
 232:hidtweak.cpp  ****     next_samp = (read_ptr_ + 1) % bufferSize_;
 1031              		.loc 1 232 15 view .LVU310
 1032 000c B3FBF2F1 		udiv	r1, r3, r2
 1033 0010 02FB1133 		mls	r3, r2, r1, r3
 234:hidtweak.cpp  ****     {
 235:hidtweak.cpp  ****         return BUFFER_STATE_PREPARE_1;
 236:hidtweak.cpp  ****     }
 237:hidtweak.cpp  ****     else
 238:hidtweak.cpp  ****     {
 239:hidtweak.cpp  ****         return BUFFER_STATE_PREPARE_0;
 1034              		.loc 1 239 16 view .LVU311
 1035 0014 B3EB520F 		cmp	r3, r2, lsr #1
 240:hidtweak.cpp  ****     }
 241:hidtweak.cpp  **** }
 1036              		.loc 1 241 1 view .LVU312
 1037 0018 34BF     		ite	cc
 1038 001a 0220     		movcc	r0, #2
 1039              	.LVL88:
 1040              		.loc 1 241 1 view .LVU313
 1041 001c 0120     		movcs	r0, #1
 1042 001e 7047     		bx	lr
 1043              		.cfi_endproc
 1044              	.LFE2581:
 1046              		.section	.text._ZN5daisy10WavPlayerT12TimeUntilEOFEv,"ax",%progbits
 1047              		.align	1
 1048              		.p2align 2,,3
 1049              		.global	_ZN5daisy10WavPlayerT12TimeUntilEOFEv
 1050              		.syntax unified
 1051              		.thumb
 1052              		.thumb_func
 1054              	_ZN5daisy10WavPlayerT12TimeUntilEOFEv:
 1055              	.LVL89:
 1056              	.LFB2582:
 242:hidtweak.cpp  **** 
 243:hidtweak.cpp  **** uint32_t WavPlayerT::TimeUntilEOF() {
 1057              		.loc 1 243 37 is_stmt 1 view -0
 1058              		.cfi_startproc
 1059              		@ args = 0, pretend = 0, frame = 0
 1060              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 27


 1061              		@ link register save eliminated.
 244:hidtweak.cpp  ****     if(!playing_) return 0;
 1062              		.loc 1 244 5 view .LVU315
 1063              		.loc 1 244 9 is_stmt 0 view .LVU316
 1064 0000 00F54052 		add	r2, r0, #12288
 1065              		.loc 1 244 5 view .LVU317
 1066 0004 92F80139 		ldrb	r3, [r2, #2305]	@ zero_extendqisi2
 1067 0008 1BB3     		cbz	r3, .L74
 245:hidtweak.cpp  ****     return (float)((file_info_[file_sel_].length - read_ptr_abs_) / numChannels_ / 48000.0) * 1000;
 1068              		.loc 1 245 5 is_stmt 1 view .LVU318
 1069              		.loc 1 245 43 is_stmt 0 view .LVU319
 1070 000a D2F8F038 		ldr	r3, [r2, #2288]
 1071 000e 4FF40C71 		mov	r1, #560
 1072              		.loc 1 245 93 view .LVU320
 1073 0012 DFED135A 		vldr.32	s11, .L79+8
 1074              		.loc 1 245 43 view .LVU321
 1075 0016 03FB0111 		mla	r1, r3, r1, r1
 243:hidtweak.cpp  ****     if(!playing_) return 0;
 1076              		.loc 1 243 37 view .LVU322
 1077 001a 10B4     		push	{r4}
 1078              		.cfi_def_cfa_offset 4
 1079              		.cfi_offset 4, -4
 1080              		.loc 1 245 50 view .LVU323
 1081 001c D2F8FC48 		ldr	r4, [r2, #2300]
 1082              		.loc 1 245 67 view .LVU324
 1083 0020 8268     		ldr	r2, [r0, #8]
 1084              		.loc 1 245 43 view .LVU325
 1085 0022 0844     		add	r0, r0, r1
 1086              	.LVL90:
 1087              		.loc 1 245 50 view .LVU326
 1088 0024 8368     		ldr	r3, [r0, #8]
 1089 0026 1B1B     		subs	r3, r3, r4
 246:hidtweak.cpp  **** };...
 1090              		.loc 1 246 1 view .LVU327
 1091 0028 5DF8044B 		ldr	r4, [sp], #4
 1092              		.cfi_restore 4
 1093              		.cfi_def_cfa_offset 0
 245:hidtweak.cpp  ****     return (float)((file_info_[file_sel_].length - read_ptr_abs_) / numChannels_ / 48000.0) * 1000;
 1094              		.loc 1 245 67 view .LVU328
 1095 002c B3FBF2F3 		udiv	r3, r3, r2
 245:hidtweak.cpp  ****     return (float)((file_info_[file_sel_].length - read_ptr_abs_) / numChannels_ / 48000.0) * 1000;
 1096              		.loc 1 245 82 view .LVU329
 1097 0030 07EE903A 		vmov	s15, r3	@ int
 1098 0034 9FED084B 		vldr.64	d4, .L79
 1099 0038 B8EE676B 		vcvt.f64.u32	d6, s15
 1100 003c 86EE047B 		vdiv.f64	d7, d6, d4
 245:hidtweak.cpp  ****     return (float)((file_info_[file_sel_].length - read_ptr_abs_) / numChannels_ / 48000.0) * 1000;
 1101              		.loc 1 245 12 view .LVU330
 1102 0040 B7EEC77B 		vcvt.f32.f64	s14, d7
 245:hidtweak.cpp  ****     return (float)((file_info_[file_sel_].length - read_ptr_abs_) / numChannels_ / 48000.0) * 1000;
 1103              		.loc 1 245 93 view .LVU331
 1104 0044 27EE257A 		vmul.f32	s14, s14, s11
 245:hidtweak.cpp  ****     return (float)((file_info_[file_sel_].length - read_ptr_abs_) / numChannels_ / 48000.0) * 1000;
 1105              		.loc 1 245 95 view .LVU332
 1106 0048 FCEEC77A 		vcvt.u32.f32	s15, s14
 1107 004c 17EE900A 		vmov	r0, s15	@ int
 1108              		.loc 1 246 1 view .LVU333
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 28


 1109 0050 7047     		bx	lr
 1110              	.LVL91:
 1111              	.L74:
 244:hidtweak.cpp  ****     if(!playing_) return 0;
 1112              		.loc 1 244 26 view .LVU334
 1113 0052 1846     		mov	r0, r3
 1114              	.LVL92:
 1115              		.loc 1 246 1 view .LVU335
 1116 0054 7047     		bx	lr
 1117              	.L80:
 1118 0056 00BF     		.align	3
 1119              	.L79:
 1120 0058 00000000 		.word	0
 1121 005c 0070E740 		.word	1088909312
 1122 0060 00007A44 		.word	1148846080
 1123              		.cfi_endproc
 1124              	.LFE2582:
 1126              		.text
 1127              	.Letext0:
 1128              		.file 2 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/machine/_default_types.h"
 1129              		.file 3 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/_stdint.h"
 1130              		.file 4 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/stdint.h"
 1131              		.file 5 "/Library/DaisyToolchain/0.2.0/arm/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 1132              		.file 6 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cmath"
 1133              		.file 7 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/std_abs.h"
 1134              		.file 8 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstring"
 1135              		.file 9 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdlib"
 1136              		.file 10 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdint"
 1137              		.file 11 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/type_traits"
 1138              		.file 12 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/debug/debug.h"
 1139              		.file 13 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/arm-none-eabi/thumb/v
 1140              		.file 14 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/algorithmfwd.h"
 1141              		.file 15 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/stl_pair.h"
 1142              		.file 16 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/exception_ptr.h"
 1143              		.file 17 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdarg"
 1144              		.file 18 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdio"
 1145              		.file 19 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/predefined_ops.h
 1146              		.file 20 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/_types.h"
 1147              		.file 21 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/reent.h"
 1148              		.file 22 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/lock.h"
 1149              		.file 23 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/math.h"
 1150              		.file 24 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/stdlib.h"
 1151              		.file 25 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/math.h"
 1152              		.file 26 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/string.h"
 1153              		.file 27 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/stdlib.h"
 1154              		.file 28 "../../libDaisy/src/daisy_core.h"
 1155              		.file 29 "../../libDaisy/src/util/wav_format.h"
 1156              		.file 30 "wavplayert.h"
 1157              		.file 31 "../../libDaisy/src/dev/max11300.h"
 1158              		.file 32 "../../libDaisy/src/daisy_seed.h"
 1159              		.file 33 "../../libDaisy/Middlewares/Third_Party/FatFs/src/integer.h"
 1160              		.file 34 "../../libDaisy/Middlewares/Third_Party/FatFs/src/ff.h"
 1161              		.file 35 "/Library/DaisyToolchain/0.2.0/arm/lib/gcc/arm-none-eabi/10.3.1/include/stdarg.h"
 1162              		.file 36 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/stdio.h"
 1163              		.file 37 "../../libDaisy/src/dev/sr_595.h"
 1164              		.file 38 "<built-in>"
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s 			page 29


DEFINED SYMBOLS
                            *ABS*:0000000000000000 hidtweak.cpp
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:19     .rodata._ZN5daisy10WavPlayerT4InitEPKcPsjj.str1.4:0000000000000000 $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:32     .text._ZN5daisy10WavPlayerT4InitEPKcPsjj:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:39     .text._ZN5daisy10WavPlayerT4InitEPKcPsjj:0000000000000000 _ZN5daisy10WavPlayerT4InitEPKcPsjj
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:342    .text._ZN5daisy10WavPlayerT4InitEPKcPsjj:0000000000000164 $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:352    .text._ZN5daisy10WavPlayerT5CloseEv:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:359    .text._ZN5daisy10WavPlayerT5CloseEv:0000000000000000 _ZN5daisy10WavPlayerT5CloseEv
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:387    .text._ZN5daisy10WavPlayerT6StreamEv:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:394    .text._ZN5daisy10WavPlayerT6StreamEv:0000000000000000 _ZN5daisy10WavPlayerT6StreamEv
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:506    .text._ZN5daisy10WavPlayerT7PrepareEv:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:513    .text._ZN5daisy10WavPlayerT7PrepareEv:0000000000000000 _ZN5daisy10WavPlayerT7PrepareEv
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:719    .text._ZN5daisy10WavPlayerT4OpenEj:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:726    .text._ZN5daisy10WavPlayerT4OpenEj:0000000000000000 _ZN5daisy10WavPlayerT4OpenEj
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:870    .text._ZN5daisy10WavPlayerT8OpenByIdEPKc:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:877    .text._ZN5daisy10WavPlayerT8OpenByIdEPKc:0000000000000000 _ZN5daisy10WavPlayerT8OpenByIdEPKc
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:965    .text._ZN5daisy10WavPlayerT7RestartEv:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:972    .text._ZN5daisy10WavPlayerT7RestartEv:0000000000000000 _ZN5daisy10WavPlayerT7RestartEv
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:1005   .text._ZN5daisy10WavPlayerT16GetNextBuffStateEv:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:1012   .text._ZN5daisy10WavPlayerT16GetNextBuffStateEv:0000000000000000 _ZN5daisy10WavPlayerT16GetNextBuffStateEv
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:1047   .text._ZN5daisy10WavPlayerT12TimeUntilEOFEv:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:1054   .text._ZN5daisy10WavPlayerT12TimeUntilEOFEv:0000000000000000 _ZN5daisy10WavPlayerT12TimeUntilEOFEv
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//ccF6ML2R.s:1120   .text._ZN5daisy10WavPlayerT12TimeUntilEOFEv:0000000000000058 $d

UNDEFINED SYMBOLS
f_opendir
f_readdir
strstr
strcpy
strcmp
strcat
strlen
f_closedir
f_open
f_read
f_close
f_lseek

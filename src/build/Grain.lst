ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 4
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"Grain.cpp"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text._ZN5Grain4InitEv,"ax",%progbits
  19              		.align	1
  20              		.global	_ZN5Grain4InitEv
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	_ZN5Grain4InitEv:
  26              	.LVL0:
  27              	.LFB4874:
  28              		.file 1 "Grain.cpp"
   1:Grain.cpp     **** #include "Grain.h"
   2:Grain.cpp     **** 
   3:Grain.cpp     **** size_t Grain::audio_len_;
   4:Grain.cpp     **** int16_t* Grain::left_buf_;
   5:Grain.cpp     **** int16_t* Grain::right_buf_;
   6:Grain.cpp     **** 
   7:Grain.cpp     **** const float Grain::start_decay_ = 0.8f;
   8:Grain.cpp     **** const float Grain::decay_rate_ = 5.0f;
   9:Grain.cpp     **** 
  10:Grain.cpp     **** /// @brief Initialise the Grain instance and its Phasor object 
  11:Grain.cpp     **** /// @param len Length in samples of the audio file loaded in the buffers
  12:Grain.cpp     **** void Grain::Init(){
  29              		.loc 1 12 19 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  13:Grain.cpp     ****   phasor_.Init(0.0f, 1.0f);
  34              		.loc 1 13 3 view .LVU1
  35              	.LBB22:
  36              	.LBI22:
  37              		.file 2 "GrainPhasor.h"
   1:GrainPhasor.h **** #include "constants_utils.h"
   2:GrainPhasor.h **** class GrainPhasor {
   3:GrainPhasor.h ****   public:
   4:GrainPhasor.h **** 
   5:GrainPhasor.h ****     GrainPhasor(): 
   6:GrainPhasor.h ****       phase_(0.0f), increment_(0.0f), grain_finished_(false) {};
   7:GrainPhasor.h **** 
   8:GrainPhasor.h ****     ~GrainPhasor() {};
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 2


   9:GrainPhasor.h **** 
  10:GrainPhasor.h ****     void Init(size_t grain_size, float pitch_ratio){
  38              		.loc 2 10 10 view .LVU2
  39              	.LBB23:
  11:GrainPhasor.h ****       increment_ = pitch_ratio/static_cast<float>(grain_size);
  40              		.loc 2 11 7 view .LVU3
  41              		.loc 2 11 31 is_stmt 0 view .LVU4
  42 0000 F7EE006A 		vmov.f32	s13, #1.0e+0
  43 0004 DFED057A 		vldr.32	s15, .L2
  12:GrainPhasor.h ****       phase_ = 0.0f;
  13:GrainPhasor.h ****       grain_finished_ = false;
  44              		.loc 2 13 23 view .LVU5
  45 0008 0023     		movs	r3, #0
  12:GrainPhasor.h ****       phase_ = 0.0f;
  46              		.loc 2 12 14 view .LVU6
  47 000a C0ED017A 		vstr.32	s15, [r0, #4]
  11:GrainPhasor.h ****       increment_ = pitch_ratio/static_cast<float>(grain_size);
  48              		.loc 2 11 31 view .LVU7
  49 000e 86EEA77A 		vdiv.f32	s14, s13, s15
  50              		.loc 2 13 23 view .LVU8
  51 0012 0373     		strb	r3, [r0, #12]
  11:GrainPhasor.h ****       increment_ = pitch_ratio/static_cast<float>(grain_size);
  52              		.loc 2 11 18 view .LVU9
  53 0014 80ED027A 		vstr.32	s14, [r0, #8]
  12:GrainPhasor.h ****       phase_ = 0.0f;
  54              		.loc 2 12 7 is_stmt 1 view .LVU10
  55              		.loc 2 13 7 view .LVU11
  56              	.LVL1:
  57              		.loc 2 13 7 is_stmt 0 view .LVU12
  58              	.LBE23:
  59              	.LBE22:
  14:Grain.cpp     **** }
  60              		.loc 1 14 1 view .LVU13
  61 0018 7047     		bx	lr
  62              	.L3:
  63 001a 00BF     		.align	2
  64              	.L2:
  65 001c 00000000 		.word	0
  66              		.cfi_endproc
  67              	.LFE4874:
  69              		.section	.text._ZN5Grain7TriggerEjjf,"ax",%progbits
  70              		.align	1
  71              		.global	_ZN5Grain7TriggerEjjf
  72              		.syntax unified
  73              		.thumb
  74              		.thumb_func
  76              	_ZN5Grain7TriggerEjjf:
  77              	.LVL2:
  78              	.LFB4875:
  15:Grain.cpp     **** 
  16:Grain.cpp     **** /// @brief Causes a grain to start playing and assigns its parameters
  17:Grain.cpp     **** /// @param pos Spawn position of the grain, within the audio buffer 
  18:Grain.cpp     **** /// @param grain_size Length of the grain in samples
  19:Grain.cpp     **** /// @param pitch_ratio Pitch of the grain - 1 plays the grain at its regular pitch
  20:Grain.cpp     **** void Grain::Trigger(size_t pos, size_t grain_size, float pitch_ratio) {
  79              		.loc 1 20 71 is_stmt 1 view -0
  80              		.cfi_startproc
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 3


  81              		@ args = 0, pretend = 0, frame = 0
  82              		@ frame_needed = 0, uses_anonymous_args = 0
  83              		@ link register save eliminated.
  21:Grain.cpp     ****   if (pos >= audio_len_) pos -= audio_len_;
  84              		.loc 1 21 3 view .LVU15
  85              	.LBB24:
  86              	.LBB25:
  11:GrainPhasor.h ****       phase_ = 0.0f;
  87              		.loc 2 11 32 is_stmt 0 view .LVU16
  88 0000 07EE902A 		vmov	s15, r2	@ int
  89              	.LBE25:
  90              	.LBE24:
  91              		.loc 1 21 11 view .LVU17
  92 0004 0A4B     		ldr	r3, .L6
  93              	.LBB30:
  94              	.LBB31:
  22:Grain.cpp     ****   // spawn_pos_ = pos;
  23:Grain.cpp     ****   SetSpawnPos(pos);
  24:Grain.cpp     ****   SetGrainSize(grain_size);
  25:Grain.cpp     ****   SetPitchRatio(pitch_ratio);
  26:Grain.cpp     ****   is_active_ = true;
  27:Grain.cpp     ****   phasor_.Init(grain_size_, pitch_ratio_);
  28:Grain.cpp     **** }
  29:Grain.cpp     **** 
  30:Grain.cpp     **** /// @brief Processes grain phase, applies envelope and panning and mixes into the output buffers
  31:Grain.cpp     **** /// @param sum_right Pointer to variable storing total right channel audio output of all grains
  32:Grain.cpp     **** Sample Grain::Process(Sample sample){
  33:Grain.cpp     ****   if (!is_active_) {
  34:Grain.cpp     ****       return {0.0f,0.0f};
  35:Grain.cpp     ****   }
  36:Grain.cpp     ****   float phase = phasor_.Process();
  37:Grain.cpp     ****   if (phasor_.GrainFinished()){
  38:Grain.cpp     ****     is_active_=false;
  39:Grain.cpp     ****     return {0.0f,0.0f};
  40:Grain.cpp     ****   }
  41:Grain.cpp     ****   size_t curr_idx = spawn_pos_+ static_cast<size_t>(phase*grain_size_*pitch_ratio_);
  42:Grain.cpp     **** 
  43:Grain.cpp     ****   if (curr_idx>=audio_len_-1){
  44:Grain.cpp     ****     curr_idx -= audio_len_+1;
  45:Grain.cpp     ****   }
  46:Grain.cpp     ****   else if (curr_idx<0){
  47:Grain.cpp     ****     curr_idx += audio_len_;
  48:Grain.cpp     ****   }
  49:Grain.cpp     **** 
  50:Grain.cpp     ****   float left = s162f(left_buf_[curr_idx]);
  51:Grain.cpp     ****   float right = s162f(right_buf_[curr_idx]);
  52:Grain.cpp     ****   float env = ApplyEnvelope(phase);
  53:Grain.cpp     **** 
  54:Grain.cpp     ****   sample.left += (left*env);
  55:Grain.cpp     ****   sample.right += (right*env);
  56:Grain.cpp     ****   return sample;
  57:Grain.cpp     **** }
  58:Grain.cpp     **** 
  59:Grain.cpp     **** /// @brief Applies amplitude envelope (Hann window) to grain based on its phase
  60:Grain.cpp     **** /// @param phase Current playback position of the grain within its lifetime (from 0 - 1)
  61:Grain.cpp     **** /// @return Amplitude of the grain after envelope has been applied
  62:Grain.cpp     **** float Grain::ApplyEnvelope(float phase){
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 4


  63:Grain.cpp     ****   /* Hann formula from https://uk.mathworks.com/help/signal/ref/hann.html */
  64:Grain.cpp     ****   return 0.5f * (1.0f - FastCos(2.0f * M_PI * phase));
  65:Grain.cpp     ****   // return 1.0f;
  66:Grain.cpp     **** }
  67:Grain.cpp     **** 
  68:Grain.cpp     **** 
  69:Grain.cpp     **** void Grain::SetSpawnPos(size_t spawn_pos){ spawn_pos_ = spawn_pos; }
  70:Grain.cpp     **** void Grain::SetGrainSize(size_t grain_size) { grain_size_ = grain_size; }
  71:Grain.cpp     **** void Grain::SetPitchRatio(float pitch_ratio) { pitch_ratio_ = pitch_ratio; }
  95              		.loc 1 71 61 view .LVU18
  96 0006 80ED060A 		vstr.32	s0, [r0, #24]
  97              	.LBE31:
  98              	.LBE30:
  99              	.LBB33:
 100              	.LBB26:
  11:GrainPhasor.h ****       phase_ = 0.0f;
 101              		.loc 2 11 32 view .LVU19
 102 000a F8EE677A 		vcvt.f32.u32	s15, s15
 103              	.LBE26:
 104              	.LBE33:
  21:Grain.cpp     ****   // spawn_pos_ = pos;
 105              		.loc 1 21 11 view .LVU20
 106 000e 1B68     		ldr	r3, [r3]
  21:Grain.cpp     ****   // spawn_pos_ = pos;
 107              		.loc 1 21 3 view .LVU21
 108 0010 8B42     		cmp	r3, r1
  21:Grain.cpp     ****   // spawn_pos_ = pos;
 109              		.loc 1 21 26 is_stmt 1 view .LVU22
 110              	.LBB34:
 111              	.LBB27:
  11:GrainPhasor.h ****       phase_ = 0.0f;
 112              		.loc 2 11 31 is_stmt 0 view .LVU23
 113 0012 80EE277A 		vdiv.f32	s14, s0, s15
 114              	.LBE27:
 115              	.LBE34:
  21:Grain.cpp     ****   // spawn_pos_ = pos;
 116              		.loc 1 21 30 view .LVU24
 117 0016 98BF     		it	ls
 118 0018 C91A     		subls	r1, r1, r3
 119              	.LVL3:
  23:Grain.cpp     ****   SetGrainSize(grain_size);
 120              		.loc 1 23 3 is_stmt 1 view .LVU25
 121              	.LBB35:
 122              	.LBI35:
  69:Grain.cpp     **** void Grain::SetGrainSize(size_t grain_size) { grain_size_ = grain_size; }
 123              		.loc 1 69 6 view .LVU26
 124              	.LBB36:
  69:Grain.cpp     **** void Grain::SetGrainSize(size_t grain_size) { grain_size_ = grain_size; }
 125              		.loc 1 69 44 view .LVU27
 126              	.LBE36:
 127              	.LBE35:
  26:Grain.cpp     ****   phasor_.Init(grain_size_, pitch_ratio_);
 128              		.loc 1 26 14 is_stmt 0 view .LVU28
 129 001a 0123     		movs	r3, #1
 130 001c 0370     		strb	r3, [r0]
 131              	.LBB37:
 132              	.LBB28:
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 5


  12:GrainPhasor.h ****       grain_finished_ = false;
 133              		.loc 2 12 14 view .LVU29
 134 001e 0023     		movs	r3, #0
 135 0020 4360     		str	r3, [r0, #4]	@ float
 136              		.loc 2 13 23 view .LVU30
 137 0022 0023     		movs	r3, #0
 138              	.LBE28:
 139              	.LBE37:
 140              	.LBB38:
 141              	.LBB39:
  70:Grain.cpp     **** void Grain::SetPitchRatio(float pitch_ratio) { pitch_ratio_ = pitch_ratio; }
 142              		.loc 1 70 59 view .LVU31
 143 0024 C0E90412 		strd	r1, r2, [r0, #16]
 144              	.LBE39:
 145              	.LBE38:
  25:Grain.cpp     ****   is_active_ = true;
 146              		.loc 1 25 3 is_stmt 1 view .LVU32
 147              	.LVL4:
 148              	.LBB40:
 149              	.LBI30:
 150              		.loc 1 71 6 view .LVU33
 151              	.LBB32:
 152              		.loc 1 71 48 view .LVU34
 153              		.loc 1 71 48 is_stmt 0 view .LVU35
 154              	.LBE32:
 155              	.LBE40:
  26:Grain.cpp     ****   phasor_.Init(grain_size_, pitch_ratio_);
 156              		.loc 1 26 3 is_stmt 1 view .LVU36
  27:Grain.cpp     **** }
 157              		.loc 1 27 3 view .LVU37
 158              	.LBB41:
 159              	.LBI24:
  10:GrainPhasor.h ****       increment_ = pitch_ratio/static_cast<float>(grain_size);
 160              		.loc 2 10 10 view .LVU38
 161              	.LBB29:
  11:GrainPhasor.h ****       phase_ = 0.0f;
 162              		.loc 2 11 7 view .LVU39
 163              		.loc 2 13 23 is_stmt 0 view .LVU40
 164 0028 0373     		strb	r3, [r0, #12]
  11:GrainPhasor.h ****       phase_ = 0.0f;
 165              		.loc 2 11 18 view .LVU41
 166 002a 80ED027A 		vstr.32	s14, [r0, #8]
  12:GrainPhasor.h ****       grain_finished_ = false;
 167              		.loc 2 12 7 is_stmt 1 view .LVU42
 168              		.loc 2 13 7 view .LVU43
 169              	.LVL5:
 170              		.loc 2 13 7 is_stmt 0 view .LVU44
 171              	.LBE29:
 172              	.LBE41:
  28:Grain.cpp     **** 
 173              		.loc 1 28 1 view .LVU45
 174 002e 7047     		bx	lr
 175              	.L7:
 176              		.align	2
 177              	.L6:
 178 0030 00000000 		.word	.LANCHOR0
 179              		.cfi_endproc
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 6


 180              	.LFE4875:
 182              		.section	.text._ZN5Grain13ApplyEnvelopeEf,"ax",%progbits
 183              		.align	1
 184              		.global	_ZN5Grain13ApplyEnvelopeEf
 185              		.syntax unified
 186              		.thumb
 187              		.thumb_func
 189              	_ZN5Grain13ApplyEnvelopeEf:
 190              	.LVL6:
 191              	.LFB4877:
  62:Grain.cpp     ****   /* Hann formula from https://uk.mathworks.com/help/signal/ref/hann.html */
 192              		.loc 1 62 40 is_stmt 1 view -0
 193              		.cfi_startproc
 194              		@ args = 0, pretend = 0, frame = 0
 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196              		@ link register save eliminated.
  64:Grain.cpp     ****   // return 1.0f;
 197              		.loc 1 64 3 view .LVU47
  64:Grain.cpp     ****   // return 1.0f;
 198              		.loc 1 64 45 is_stmt 0 view .LVU48
 199 0000 9FED0F7B 		vldr.64	d7, .L9
  64:Grain.cpp     ****   // return 1.0f;
 200              		.loc 1 64 47 view .LVU49
 201 0004 B7EEC00A 		vcvt.f64.f32	d0, s0
 202              	.LVL7:
 203              	.LBB44:
 204              	.LBB45:
 205              		.file 3 "constants_utils.h"
   1:constants_utils.h **** #pragma once
   2:constants_utils.h **** #include "stddef.h"
   3:constants_utils.h **** #include <time.h>
   4:constants_utils.h **** 
   5:constants_utils.h **** /* audio constants */
   6:constants_utils.h **** constexpr int SAMPLE_RATE = 48000;
   7:constants_utils.h **** constexpr float SAMPLE_RATE_FLOAT = 48000.f;
   8:constants_utils.h **** constexpr int BIT_DEPTH = 16;
   9:constants_utils.h **** 
  10:constants_utils.h **** /* delay line buffer size (2s @ 48kHz) */
  11:constants_utils.h **** constexpr size_t DELAY_TIME = 96000;
  12:constants_utils.h **** 
  13:constants_utils.h **** /* maximum length of recording to SD card */
  14:constants_utils.h **** constexpr size_t MAX_REC_OUT_LEN = 120;
  15:constants_utils.h **** 
  16:constants_utils.h **** /* 16mb - max size of one stereo channel to be loaded into buffers */
  17:constants_utils.h **** constexpr size_t CHNL_BUF_SIZE_ABS = 16*1024*1024;
  18:constants_utils.h **** /* above is absolute size - each sample needs an int16 (2 bytes) so we do (abs_size)/2 */
  19:constants_utils.h **** constexpr size_t CHNL_BUF_SIZE_SAMPS = 8*1024*1024;
  20:constants_utils.h **** 
  21:constants_utils.h **** /* chunk size for reading audio into temporary buffer */
  22:constants_utils.h **** const size_t BUF_CHUNK_SZ = 16384;
  23:constants_utils.h **** 
  24:constants_utils.h **** /* file reading constants*/
  25:constants_utils.h **** static const uint16_t MAX_FILES = 32;                      
  26:constants_utils.h **** static const uint16_t MAX_FNAME_LEN = 128;
  27:constants_utils.h **** 
  28:constants_utils.h **** /* granular synth parameter constants */
  29:constants_utils.h **** constexpr int MIN_GRAINS = 1;
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 7


  30:constants_utils.h **** constexpr int MAX_GRAINS = 15;
  31:constants_utils.h **** 
  32:constants_utils.h **** static constexpr int NUM_SYNTH_MODES = 4;
  33:constants_utils.h **** constexpr float PARAM_CHANGE_THRESHOLD = 0.01f;
  34:constants_utils.h **** constexpr float MIN_GRAIN_SIZE_MS = 100.0f;
  35:constants_utils.h **** constexpr float MAX_GRAIN_SIZE_MS = 3000.0f;
  36:constants_utils.h **** constexpr size_t MIN_GRAIN_SIZE_SAMPLES = 4800; /* 100ms at 48kHz */
  37:constants_utils.h **** constexpr size_t MAX_GRAIN_SIZE_SAMPLES = 144000; /* 3s at 48kHz */
  38:constants_utils.h **** constexpr float MIN_PITCH = 0.5f;
  39:constants_utils.h **** constexpr float MAX_PITCH = 2.0f;
  40:constants_utils.h **** 
  41:constants_utils.h **** 
  42:constants_utils.h **** /* button event constants */
  43:constants_utils.h **** const unsigned long DEBOUNCE_DELAY = 50; 
  44:constants_utils.h **** const unsigned long LONG_PRESS_TIME = 1000;
  45:constants_utils.h **** 
  46:constants_utils.h **** /* hipass filter frequency range */
  47:constants_utils.h **** const float HIPASS_LOWER_BOUND = 0.0004f;
  48:constants_utils.h **** const float HIPASS_UPPER_BOUND = 0.01f;
  49:constants_utils.h **** 
  50:constants_utils.h **** /* lowpass filter frequency range */
  51:constants_utils.h **** const float LOPASS_LOWER_BOUND = 20.0f;
  52:constants_utils.h **** const float LOPASS_UPPER_BOUND = 18000.0f;
  53:constants_utils.h **** 
  54:constants_utils.h **** // const float HICUT_FREQ = 0.3125f; /* 15000Hz @ 48kHz sample rate */
  55:constants_utils.h **** const float HICUT_FREQ = 0.34375; /* 16500Hz @ 48kHz sample rate */
  56:constants_utils.h **** 
  57:constants_utils.h **** /* random number generator variables and helper functions */
  58:constants_utils.h **** extern uint32_t rng_state;
  59:constants_utils.h **** static inline void SeedRng(){
  60:constants_utils.h ****   rng_state = static_cast<uint32_t>(time(nullptr));
  61:constants_utils.h **** }
  62:constants_utils.h **** static inline float RngFloat(){
  63:constants_utils.h ****   /* xorshift32 from https://en.wikipedia.org/wiki/Xorshift 
  64:constants_utils.h ****   for simple fast random floats */
  65:constants_utils.h ****   rng_state ^= rng_state << 13;
  66:constants_utils.h ****   rng_state ^= rng_state >> 17;
  67:constants_utils.h ****   rng_state ^= rng_state << 5;
  68:constants_utils.h ****   /* ensures output is between 0-1 */
  69:constants_utils.h ****   float out = static_cast<float>(rng_state) / static_cast<float>(UINT32_MAX);
  70:constants_utils.h ****   return out;
  71:constants_utils.h **** }
  72:constants_utils.h **** 
  73:constants_utils.h **** /* integer clamp as can't use std::clamp */
  74:constants_utils.h **** static inline constexpr size_t intclamp(size_t val, size_t min, size_t max){
  75:constants_utils.h ****   if (val < min) val = min;
  76:constants_utils.h ****   else if (val > max) val = max;
  77:constants_utils.h ****   return val;
  78:constants_utils.h **** }
  79:constants_utils.h **** 
  80:constants_utils.h **** /* converts milliseconds to number of samples */
  81:constants_utils.h **** static inline constexpr size_t MsToSamples(float ms){
  82:constants_utils.h ****   return static_cast<size_t>(SAMPLE_RATE_FLOAT * (ms*0.001f));
  83:constants_utils.h **** }
  84:constants_utils.h **** 
  85:constants_utils.h **** /* converts number of samples to milliseconds */
  86:constants_utils.h **** static inline constexpr float SamplesToMs(size_t samples){
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 8


  87:constants_utils.h ****   return (static_cast<float>(samples) * 1000.0f) / SAMPLE_RATE_FLOAT; 
  88:constants_utils.h **** }
  89:constants_utils.h **** 
  90:constants_utils.h **** /* fast cos and sin approximations
  91:constants_utils.h ****   thanks and credit to Jack Ganssle: 
  92:constants_utils.h ****   https://www.ganssle.com/item/approximations-for-trig-c-code.htm
  93:constants_utils.h ****   https://www.ganssle.com/approx/sincos.cpp
  94:constants_utils.h **** */
  95:constants_utils.h **** constexpr float halfpi = M_PI/2.0f;
  96:constants_utils.h **** 
  97:constants_utils.h **** static inline constexpr float FastCos(float x){
  98:constants_utils.h ****   const float c1= 0.99940307;
  99:constants_utils.h ****   const float c2=-0.49558072;
 100:constants_utils.h ****   const float c3= 0.03679168;
 101:constants_utils.h **** 
 102:constants_utils.h ****   float x2 = x * x;
 103:constants_utils.h ****   return (c1 + x2*(c2 + c3 * x2));
 206              		.loc 3 103 23 view .LVU50
 207 0008 DFED0F6A 		vldr.32	s13, .L9+8
 208              	.LBE45:
 209              	.LBE44:
  64:Grain.cpp     ****   // return 1.0f;
 210              		.loc 1 64 45 view .LVU51
 211 000c 20EE070B 		vmul.f64	d0, d0, d7
 212              	.LBB49:
 213              	.LBB46:
 214              		.loc 3 103 23 view .LVU52
 215 0010 DFED0E7A 		vldr.32	s15, .L9+12
 216              	.LBE46:
 217              	.LBE49:
  64:Grain.cpp     ****   // return 1.0f;
 218              		.loc 1 64 32 view .LVU53
 219 0014 B7EEC00B 		vcvt.f32.f64	s0, d0
 220              	.LVL8:
 221              	.LBB50:
 222              	.LBI44:
  97:constants_utils.h ****   const float c1= 0.99940307;
 223              		.loc 3 97 31 is_stmt 1 view .LVU54
 224              	.LBB47:
  98:constants_utils.h ****   const float c2=-0.49558072;
 225              		.loc 3 98 3 view .LVU55
  99:constants_utils.h ****   const float c3= 0.03679168;
 226              		.loc 3 99 3 view .LVU56
 100:constants_utils.h **** 
 227              		.loc 3 100 3 view .LVU57
 102:constants_utils.h ****   return (c1 + x2*(c2 + c3 * x2));
 228              		.loc 3 102 3 view .LVU58
 102:constants_utils.h ****   return (c1 + x2*(c2 + c3 * x2));
 229              		.loc 3 102 9 is_stmt 0 view .LVU59
 230 0018 20EE000A 		vmul.f32	s0, s0, s0
 231              	.LVL9:
 232              		.loc 3 103 3 is_stmt 1 view .LVU60
 233              		.loc 3 103 23 is_stmt 0 view .LVU61
 234 001c E0EE276A 		vfma.f32	s13, s0, s15
 235              		.loc 3 103 33 view .LVU62
 236 0020 DFED0B7A 		vldr.32	s15, .L9+16
 237 0024 E0EE267A 		vfma.f32	s15, s0, s13
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 9


 238              	.LBE47:
 239              	.LBE50:
  66:Grain.cpp     **** 
 240              		.loc 1 66 1 view .LVU63
 241 0028 B6EE000A 		vmov.f32	s0, #5.0e-1
 242              	.LVL10:
 243              	.LBB51:
 244              	.LBB48:
 245              		.loc 3 103 33 view .LVU64
 246 002c B0EE677A 		vmov.f32	s14, s15
 247              	.LVL11:
 248              		.loc 3 103 33 view .LVU65
 249              	.LBE48:
 250              	.LBE51:
  64:Grain.cpp     ****   // return 1.0f;
 251              		.loc 1 64 23 view .LVU66
 252 0030 F7EE007A 		vmov.f32	s15, #1.0e+0
 253 0034 77EEC77A 		vsub.f32	s15, s15, s14
  66:Grain.cpp     **** 
 254              		.loc 1 66 1 view .LVU67
 255 0038 27EE800A 		vmul.f32	s0, s15, s0
 256 003c 7047     		bx	lr
 257              	.L10:
 258 003e 00BF     		.align	3
 259              	.L9:
 260 0040 182D4454 		.word	1413754136
 261 0044 FB211940 		.word	1075388923
 262 0048 C2BCFDBE 		.word	-1090667326
 263 004c DFB2163D 		.word	1024897759
 264 0050 E1D87F3F 		.word	1065343201
 265              		.cfi_endproc
 266              	.LFE4877:
 268              		.section	.text._ZN5Grain7ProcessE6Sample,"ax",%progbits
 269              		.align	1
 270              		.global	_ZN5Grain7ProcessE6Sample
 271              		.syntax unified
 272              		.thumb
 273              		.thumb_func
 275              	_ZN5Grain7ProcessE6Sample:
 276              	.LVL12:
 277              	.LFB4876:
  32:Grain.cpp     ****   if (!is_active_) {
 278              		.loc 1 32 37 is_stmt 1 view -0
 279              		.cfi_startproc
 280              		@ args = 0, pretend = 0, frame = 24
 281              		@ frame_needed = 0, uses_anonymous_args = 0
  32:Grain.cpp     ****   if (!is_active_) {
 282              		.loc 1 32 37 is_stmt 0 view .LVU69
 283 0000 7FB5     		push	{r0, r1, r2, r3, r4, r5, r6, lr}
 284              		.cfi_def_cfa_offset 32
 285              		.cfi_offset 14, -4
 286              	.LVL13:
  33:Grain.cpp     ****       return {0.0f,0.0f};
 287              		.loc 1 33 3 is_stmt 1 view .LVU70
 288 0002 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
  32:Grain.cpp     ****   if (!is_active_) {
 289              		.loc 1 32 37 is_stmt 0 view .LVU71
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 10


 290 0004 B0EE406A 		vmov.f32	s12, s0
 291 0008 F0EE605A 		vmov.f32	s11, s1
 292 000c 8DED020A 		vstr.32	s0, [sp, #8]
 293              	.LVL14:
  32:Grain.cpp     ****   if (!is_active_) {
 294              		.loc 1 32 37 view .LVU72
 295 0010 CDED030A 		vstr.32	s1, [sp, #12]
 296              	.LVL15:
  33:Grain.cpp     ****       return {0.0f,0.0f};
 297              		.loc 1 33 3 view .LVU73
 298 0014 4BB9     		cbnz	r3, .L12
 299              	.L23:
  39:Grain.cpp     ****   }
 300              		.loc 1 39 5 is_stmt 1 view .LVU74
  39:Grain.cpp     ****   }
 301              		.loc 1 39 22 is_stmt 0 view .LVU75
 302 0016 0023     		movs	r3, #0
 303 0018 0493     		str	r3, [sp, #16]	@ float
 304 001a 0593     		str	r3, [sp, #20]	@ float
 305              	.L13:
  57:Grain.cpp     **** 
 306              		.loc 1 57 1 view .LVU76
 307 001c 9DED040A 		vldr.32	s0, [sp, #16]
 308 0020 DDED050A 		vldr.32	s1, [sp, #20]
 309 0024 07B0     		add	sp, sp, #28
 310              		.cfi_remember_state
 311              		.cfi_def_cfa_offset 4
 312              		@ sp needed
 313 0026 5DF804FB 		ldr	pc, [sp], #4
 314              	.L12:
 315              		.cfi_restore_state
  36:Grain.cpp     ****   if (phasor_.GrainFinished()){
 316              		.loc 1 36 3 is_stmt 1 view .LVU77
 317              	.LVL16:
 318              	.LBB62:
 319              	.LBI62:
  14:GrainPhasor.h ****     }
  15:GrainPhasor.h **** 
  16:GrainPhasor.h ****     void Reset(){
  17:GrainPhasor.h ****       phase_ = 0.0f;
  18:GrainPhasor.h ****     }
  19:GrainPhasor.h **** 
  20:GrainPhasor.h ****     bool GrainFinished(){
  21:GrainPhasor.h ****       return grain_finished_;
  22:GrainPhasor.h ****     }
  23:GrainPhasor.h **** 
  24:GrainPhasor.h ****     float Process(){
 320              		.loc 2 24 11 view .LVU78
 321              	.LBB63:
  25:GrainPhasor.h ****       if (grain_finished_) { return 0.0f; }
 322              		.loc 2 25 7 view .LVU79
 323 002a 037B     		ldrb	r3, [r0, #12]	@ zero_extendqisi2
 324 002c 13B1     		cbz	r3, .L14
 325              	.LVL17:
 326              	.L17:
 327              		.loc 2 25 7 is_stmt 0 view .LVU80
 328              	.LBE63:
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 11


 329              	.LBE62:
  38:Grain.cpp     ****     return {0.0f,0.0f};
 330              		.loc 1 38 5 is_stmt 1 view .LVU81
  38:Grain.cpp     ****     return {0.0f,0.0f};
 331              		.loc 1 38 15 is_stmt 0 view .LVU82
 332 002e 0023     		movs	r3, #0
 333 0030 0370     		strb	r3, [r0]
 334 0032 F0E7     		b	.L23
 335              	.LVL18:
 336              	.L14:
 337              	.LBB70:
 338              	.LBB68:
 339              	.LBB64:
 340              	.LBI64:
  24:GrainPhasor.h ****       if (grain_finished_) { return 0.0f; }
 341              		.loc 2 24 11 is_stmt 1 view .LVU83
 342              	.LBB65:
  26:GrainPhasor.h ****       phase_ = phase_ + increment_;
 343              		.loc 2 26 7 view .LVU84
 344              		.loc 2 26 23 is_stmt 0 view .LVU85
 345 0034 D0ED017A 		vldr.32	s15, [r0, #4]
 346 0038 90ED020A 		vldr.32	s0, [r0, #8]
 347 003c 37EE800A 		vadd.f32	s0, s15, s0
  27:GrainPhasor.h ****       if (phase_>1.0f){
 348              		.loc 2 27 7 view .LVU86
 349 0040 F7EE007A 		vmov.f32	s15, #1.0e+0
  26:GrainPhasor.h ****       phase_ = phase_ + increment_;
 350              		.loc 2 26 14 view .LVU87
 351 0044 80ED010A 		vstr.32	s0, [r0, #4]
 352              		.loc 2 27 7 is_stmt 1 view .LVU88
 353 0048 B4EEE70A 		vcmpe.f32	s0, s15
 354 004c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 355 0050 04DD     		ble	.L21
  28:GrainPhasor.h ****         grain_finished_ = true;
 356              		.loc 2 28 9 view .LVU89
 357              		.loc 2 28 25 is_stmt 0 view .LVU90
 358 0052 0123     		movs	r3, #1
 359 0054 0373     		strb	r3, [r0, #12]
  29:GrainPhasor.h ****         phase_ =0.0f;
 360              		.loc 2 29 9 is_stmt 1 view .LVU91
 361              		.loc 2 29 16 is_stmt 0 view .LVU92
 362 0056 0023     		movs	r3, #0
 363 0058 4360     		str	r3, [r0, #4]	@ float
  30:GrainPhasor.h ****       }
  31:GrainPhasor.h ****       return phase_;
 364              		.loc 2 31 7 is_stmt 1 view .LVU93
 365              	.LVL19:
 366              		.loc 2 31 7 is_stmt 0 view .LVU94
 367              	.LBE65:
 368              	.LBE64:
 369              	.LBE68:
 370              	.LBE70:
  37:Grain.cpp     ****     is_active_=false;
 371              		.loc 1 37 3 is_stmt 1 view .LVU95
  21:GrainPhasor.h ****     }
 372              		.loc 2 21 7 view .LVU96
  21:GrainPhasor.h ****     }
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 12


 373              		.loc 2 21 7 is_stmt 0 view .LVU97
 374 005a E8E7     		b	.L17
 375              	.LVL20:
 376              	.L21:
 377              	.LBB71:
 378              	.LBB69:
 379              	.LBB67:
 380              	.LBB66:
 381              		.loc 2 31 7 is_stmt 1 view .LVU98
 382              		.loc 2 31 7 is_stmt 0 view .LVU99
 383              	.LBE66:
 384              	.LBE67:
 385              	.LBE69:
 386              	.LBE71:
  37:Grain.cpp     ****     is_active_=false;
 387              		.loc 1 37 3 is_stmt 1 view .LVU100
  21:GrainPhasor.h ****     }
 388              		.loc 2 21 7 view .LVU101
  41:Grain.cpp     **** 
 389              		.loc 1 41 3 view .LVU102
  41:Grain.cpp     **** 
 390              		.loc 1 41 58 is_stmt 0 view .LVU103
 391 005c D0ED057A 		vldr.32	s15, [r0, #20]	@ int
  41:Grain.cpp     **** 
 392              		.loc 1 41 70 view .LVU104
 393 0060 90ED067A 		vldr.32	s14, [r0, #24]
  41:Grain.cpp     **** 
 394              		.loc 1 41 58 view .LVU105
 395 0064 F8EE677A 		vcvt.f32.u32	s15, s15
  41:Grain.cpp     **** 
 396              		.loc 1 41 10 view .LVU106
 397 0068 0369     		ldr	r3, [r0, #16]
  41:Grain.cpp     **** 
 398              		.loc 1 41 58 view .LVU107
 399 006a 67EE807A 		vmul.f32	s15, s15, s0
  41:Grain.cpp     **** 
 400              		.loc 1 41 70 view .LVU108
 401 006e 67EE877A 		vmul.f32	s15, s15, s14
  41:Grain.cpp     **** 
 402              		.loc 1 41 33 view .LVU109
 403 0072 FCEEE77A 		vcvt.u32.f32	s15, s15
  41:Grain.cpp     **** 
 404              		.loc 1 41 10 view .LVU110
 405 0076 17EE902A 		vmov	r2, s15	@ int
 406 007a 1A44     		add	r2, r2, r3
 407 007c 1346     		mov	r3, r2
 408              	.LVL21:
  43:Grain.cpp     ****     curr_idx -= audio_len_+1;
 409              		.loc 1 43 3 is_stmt 1 view .LVU111
  43:Grain.cpp     ****     curr_idx -= audio_len_+1;
 410              		.loc 1 43 27 is_stmt 0 view .LVU112
 411 007e 144A     		ldr	r2, .L24
 412              	.LVL22:
  43:Grain.cpp     ****     curr_idx -= audio_len_+1;
 413              		.loc 1 43 27 view .LVU113
 414 0080 1268     		ldr	r2, [r2]
 415 0082 511E     		subs	r1, r2, #1
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 13


  43:Grain.cpp     ****     curr_idx -= audio_len_+1;
 416              		.loc 1 43 3 view .LVU114
 417 0084 9942     		cmp	r1, r3
 418 0086 01D8     		bhi	.L19
  44:Grain.cpp     ****   }
 419              		.loc 1 44 5 is_stmt 1 view .LVU115
  44:Grain.cpp     ****   }
 420              		.loc 1 44 14 is_stmt 0 view .LVU116
 421 0088 D243     		mvns	r2, r2
 422 008a 1344     		add	r3, r3, r2
 423              	.LVL23:
 424              	.L19:
  50:Grain.cpp     ****   float right = s162f(right_buf_[curr_idx]);
 425              		.loc 1 50 3 is_stmt 1 view .LVU117
 426              	.LBB72:
 427              	.LBI72:
 428              		.file 4 "../libDaisy/src/daisy_core.h"
   1:../libDaisy/src/daisy_core.h **** #pragma once
   2:../libDaisy/src/daisy_core.h **** #ifndef DSY_CORE_HW_H
   3:../libDaisy/src/daisy_core.h **** #define DSY_CORE_HW_H /**< & */
   4:../libDaisy/src/daisy_core.h **** #include <stdint.h>
   5:../libDaisy/src/daisy_core.h **** #include <stdlib.h>
   6:../libDaisy/src/daisy_core.h **** 
   7:../libDaisy/src/daisy_core.h **** #if defined(_MSC_VER)
   8:../libDaisy/src/daisy_core.h **** #define FORCE_INLINE __forceinline /**< & */
   9:../libDaisy/src/daisy_core.h **** #elif defined(__clang__)
  10:../libDaisy/src/daisy_core.h **** #define FORCE_INLINE inline __attribute__((always_inline)) /**< & */
  11:../libDaisy/src/daisy_core.h **** #pragma clang diagnostic ignored "-Wduplicate-decl-specifier"
  12:../libDaisy/src/daisy_core.h **** #elif defined(__GNUC__)
  13:../libDaisy/src/daisy_core.h **** #define FORCE_INLINE inline __attribute__((always_inline)) /**< & */
  14:../libDaisy/src/daisy_core.h **** #else
  15:../libDaisy/src/daisy_core.h **** #error unknown compiler
  16:../libDaisy/src/daisy_core.h **** #endif
  17:../libDaisy/src/daisy_core.h **** 
  18:../libDaisy/src/daisy_core.h **** /** @addtogroup utility
  19:../libDaisy/src/daisy_core.h ****     @{
  20:../libDaisy/src/daisy_core.h **** */
  21:../libDaisy/src/daisy_core.h **** 
  22:../libDaisy/src/daisy_core.h **** /** Macro for area of memory that is configured as cacheless
  23:../libDaisy/src/daisy_core.h **** This should be used primarily for DMA buffers, and the like.
  24:../libDaisy/src/daisy_core.h **** */
  25:../libDaisy/src/daisy_core.h **** #define DMA_BUFFER_MEM_SECTION __attribute__((section(".sram1_bss")))
  26:../libDaisy/src/daisy_core.h **** /** 
  27:../libDaisy/src/daisy_core.h **** THE DTCM RAM section is also non-cached. However, is not suitable 
  28:../libDaisy/src/daisy_core.h **** for DMA transfers. Performance is on par with internal SRAM w/ 
  29:../libDaisy/src/daisy_core.h **** cache enabled.
  30:../libDaisy/src/daisy_core.h **** */
  31:../libDaisy/src/daisy_core.h **** #define DTCM_MEM_SECTION __attribute__((section(".dtcmram_bss")))
  32:../libDaisy/src/daisy_core.h **** 
  33:../libDaisy/src/daisy_core.h **** #define FBIPMAX 0.999985f             /**< close to 1.0f-LSB at 16 bit */
  34:../libDaisy/src/daisy_core.h **** #define FBIPMIN (-FBIPMAX)            /**< - (1 - LSB) */
  35:../libDaisy/src/daisy_core.h **** #define U82F_SCALE 0.0078740f         /**< 1 / 127 */
  36:../libDaisy/src/daisy_core.h **** #define F2U8_SCALE 127.0f             /**< 128 - 1 */
  37:../libDaisy/src/daisy_core.h **** #define S82F_SCALE 0.0078125f         /**< 1 / (2**7) */
  38:../libDaisy/src/daisy_core.h **** #define F2S8_SCALE 127.0f             /**< (2 ** 7) - 1 */
  39:../libDaisy/src/daisy_core.h **** #define S162F_SCALE 3.0517578125e-05f /**< 1 / (2** 15) */
  40:../libDaisy/src/daisy_core.h **** #define F2S16_SCALE 32767.0f          /**< (2 ** 15) - 1 */
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 14


  41:../libDaisy/src/daisy_core.h **** #define F2S24_SCALE 8388608.0f        /**< 2 ** 23 */
  42:../libDaisy/src/daisy_core.h **** #define S242F_SCALE 1.192092896e-07f  /**< 1 / (2 ** 23) */
  43:../libDaisy/src/daisy_core.h **** #define S24SIGN 0x800000              /**< 2 ** 23 */
  44:../libDaisy/src/daisy_core.h **** #define S322F_SCALE 4.6566129e-10f    /**< 1 / (2** 31) */
  45:../libDaisy/src/daisy_core.h **** #define F2S32_SCALE 2147483647.f      /**< (2 ** 31) - 1 */
  46:../libDaisy/src/daisy_core.h **** 
  47:../libDaisy/src/daisy_core.h **** 
  48:../libDaisy/src/daisy_core.h **** /** shorthand macro for simplifying the reading of the left 
  49:../libDaisy/src/daisy_core.h ****  *  channel of a non-interleaved output buffer named out */
  50:../libDaisy/src/daisy_core.h **** #define OUT_L out[0]
  51:../libDaisy/src/daisy_core.h **** 
  52:../libDaisy/src/daisy_core.h **** /** shorthand macro for simplifying the reading of the right 
  53:../libDaisy/src/daisy_core.h ****  *  channel of a non-interleaved output buffer named out */
  54:../libDaisy/src/daisy_core.h **** #define OUT_R out[1]
  55:../libDaisy/src/daisy_core.h **** 
  56:../libDaisy/src/daisy_core.h **** /** shorthand macro for simplifying the reading of the left 
  57:../libDaisy/src/daisy_core.h ****  *  channel of a non-interleaved input buffer named in */
  58:../libDaisy/src/daisy_core.h **** #define IN_L in[0]
  59:../libDaisy/src/daisy_core.h **** 
  60:../libDaisy/src/daisy_core.h **** /** shorthand macro for simplifying the reading of the right 
  61:../libDaisy/src/daisy_core.h ****  *  channel of a non-interleaved input buffer named in */
  62:../libDaisy/src/daisy_core.h **** #define IN_R in[1]
  63:../libDaisy/src/daisy_core.h **** 
  64:../libDaisy/src/daisy_core.h **** /** 
  65:../libDaisy/src/daisy_core.h ****     Computes cube.
  66:../libDaisy/src/daisy_core.h ****     \param x Number to be cubed
  67:../libDaisy/src/daisy_core.h ****     \return x ^ 3
  68:../libDaisy/src/daisy_core.h **** */
  69:../libDaisy/src/daisy_core.h **** FORCE_INLINE float cube(float x)
  70:../libDaisy/src/daisy_core.h **** {
  71:../libDaisy/src/daisy_core.h ****     return (x * x) * x;
  72:../libDaisy/src/daisy_core.h **** }
  73:../libDaisy/src/daisy_core.h **** 
  74:../libDaisy/src/daisy_core.h **** /** 
  75:../libDaisy/src/daisy_core.h ****     Converts unsigned 8-bit to float
  76:../libDaisy/src/daisy_core.h ****     \param x Number to be scaled.
  77:../libDaisy/src/daisy_core.h ****     \return Scaled number.
  78:../libDaisy/src/daisy_core.h **** */
  79:../libDaisy/src/daisy_core.h **** FORCE_INLINE float u82f(uint8_t x)
  80:../libDaisy/src/daisy_core.h **** {
  81:../libDaisy/src/daisy_core.h ****     return ((float)x - 127.f) * U82F_SCALE;
  82:../libDaisy/src/daisy_core.h **** }
  83:../libDaisy/src/daisy_core.h **** 
  84:../libDaisy/src/daisy_core.h **** /**
  85:../libDaisy/src/daisy_core.h ****     Converts float to unsigned 8-bit
  86:../libDaisy/src/daisy_core.h **** */
  87:../libDaisy/src/daisy_core.h **** FORCE_INLINE uint8_t f2u8(float x)
  88:../libDaisy/src/daisy_core.h **** {
  89:../libDaisy/src/daisy_core.h ****     x = x <= FBIPMIN ? FBIPMIN : x;
  90:../libDaisy/src/daisy_core.h ****     x = x >= FBIPMAX ? FBIPMAX : x;
  91:../libDaisy/src/daisy_core.h ****     return (uint8_t)((x * F2U8_SCALE) + F2U8_SCALE);
  92:../libDaisy/src/daisy_core.h **** }
  93:../libDaisy/src/daisy_core.h **** 
  94:../libDaisy/src/daisy_core.h **** 
  95:../libDaisy/src/daisy_core.h **** /** 
  96:../libDaisy/src/daisy_core.h ****     Converts Signed 8-bit to float
  97:../libDaisy/src/daisy_core.h ****     \param x Number to be scaled.
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 15


  98:../libDaisy/src/daisy_core.h ****     \return Scaled number.
  99:../libDaisy/src/daisy_core.h **** */
 100:../libDaisy/src/daisy_core.h **** FORCE_INLINE float s82f(int8_t x)
 101:../libDaisy/src/daisy_core.h **** {
 102:../libDaisy/src/daisy_core.h ****     return (float)x * S82F_SCALE;
 103:../libDaisy/src/daisy_core.h **** }
 104:../libDaisy/src/daisy_core.h **** 
 105:../libDaisy/src/daisy_core.h **** /**
 106:../libDaisy/src/daisy_core.h ****     Converts float to Signed 8-bit
 107:../libDaisy/src/daisy_core.h **** */
 108:../libDaisy/src/daisy_core.h **** FORCE_INLINE int8_t f2s8(float x)
 109:../libDaisy/src/daisy_core.h **** {
 110:../libDaisy/src/daisy_core.h ****     x = x <= FBIPMIN ? FBIPMIN : x;
 111:../libDaisy/src/daisy_core.h ****     x = x >= FBIPMAX ? FBIPMAX : x;
 112:../libDaisy/src/daisy_core.h ****     return (int32_t)(x * F2S8_SCALE);
 113:../libDaisy/src/daisy_core.h **** }
 114:../libDaisy/src/daisy_core.h **** 
 115:../libDaisy/src/daisy_core.h **** /** 
 116:../libDaisy/src/daisy_core.h ****     Converts Signed 16-bit to float
 117:../libDaisy/src/daisy_core.h ****     \param x Number to be scaled.
 118:../libDaisy/src/daisy_core.h ****     \return Scaled number.
 119:../libDaisy/src/daisy_core.h **** */
 120:../libDaisy/src/daisy_core.h **** FORCE_INLINE float s162f(int16_t x)
 429              		.loc 4 120 20 view .LVU118
 430              	.LBB73:
 121:../libDaisy/src/daisy_core.h **** {
 122:../libDaisy/src/daisy_core.h ****     return (float)x * S162F_SCALE;
 431              		.loc 4 122 5 view .LVU119
 432              		.loc 4 122 5 is_stmt 0 view .LVU120
 433              	.LBE73:
 434              	.LBE72:
  51:Grain.cpp     ****   float env = ApplyEnvelope(phase);
 435              		.loc 1 51 3 is_stmt 1 view .LVU121
 436              	.LBB78:
 437              	.LBI78:
 120:../libDaisy/src/daisy_core.h **** {
 438              		.loc 4 120 20 view .LVU122
 439              	.LBB79:
 440              		.loc 4 122 5 view .LVU123
 441              		.loc 4 122 5 is_stmt 0 view .LVU124
 442              	.LBE79:
 443              	.LBE78:
  52:Grain.cpp     **** 
 444              		.loc 1 52 3 is_stmt 1 view .LVU125
  50:Grain.cpp     ****   float right = s162f(right_buf_[curr_idx]);
 445              		.loc 1 50 40 is_stmt 0 view .LVU126
 446 008c 114A     		ldr	r2, .L24+4
  52:Grain.cpp     **** 
 447              		.loc 1 52 28 view .LVU127
 448 008e FFF7FEFF 		bl	_ZN5Grain13ApplyEnvelopeEf
 449              	.LVL24:
  54:Grain.cpp     ****   sample.right += (right*env);
 450              		.loc 1 54 3 is_stmt 1 view .LVU128
 451              	.LBB83:
 452              	.LBB74:
 453              		.loc 4 122 23 is_stmt 0 view .LVU129
 454 0092 DFED116A 		vldr.32	s13, .L24+8
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 16


 455              	.LBE74:
 456              	.LBE83:
  50:Grain.cpp     ****   float right = s162f(right_buf_[curr_idx]);
 457              		.loc 1 50 21 view .LVU130
 458 0096 1268     		ldr	r2, [r2]
 459              	.LBB84:
 460              	.LBB75:
 461              		.loc 4 122 12 view .LVU131
 462 0098 32F91320 		ldrsh	r2, [r2, r3, lsl #1]
 463 009c 07EE102A 		vmov	s14, r2	@ int
 464              	.LBE75:
 465              	.LBE84:
  51:Grain.cpp     ****   float env = ApplyEnvelope(phase);
 466              		.loc 1 51 42 view .LVU132
 467 00a0 0E4A     		ldr	r2, .L24+12
  51:Grain.cpp     ****   float env = ApplyEnvelope(phase);
 468              		.loc 1 51 22 view .LVU133
 469 00a2 1268     		ldr	r2, [r2]
 470              	.LBB85:
 471              	.LBB76:
 472              		.loc 4 122 12 view .LVU134
 473 00a4 B8EEC77A 		vcvt.f32.s32	s14, s14
 474              	.LBE76:
 475              	.LBE85:
 476              	.LBB86:
 477              	.LBB80:
 478 00a8 32F91330 		ldrsh	r3, [r2, r3, lsl #1]
 479              	.LVL25:
 480              		.loc 4 122 12 view .LVU135
 481              	.LBE80:
 482              	.LBE86:
 483              	.LBB87:
 484              	.LBB77:
 485              		.loc 4 122 23 view .LVU136
 486 00ac 27EE267A 		vmul.f32	s14, s14, s13
 487              	.LBE77:
 488              	.LBE87:
 489              	.LBB88:
 490              	.LBB81:
 491              		.loc 4 122 12 view .LVU137
 492 00b0 07EE903A 		vmov	s15, r3	@ int
 493 00b4 F8EEE77A 		vcvt.f32.s32	s15, s15
 494              	.LBE81:
 495              	.LBE88:
  54:Grain.cpp     ****   sample.right += (right*env);
 496              		.loc 1 54 15 view .LVU138
 497 00b8 A7EE006A 		vfma.f32	s12, s14, s0
 498              	.LVL26:
  55:Grain.cpp     ****   return sample;
 499              		.loc 1 55 3 is_stmt 1 view .LVU139
 500              	.LBB89:
 501              	.LBB82:
 502              		.loc 4 122 23 is_stmt 0 view .LVU140
 503 00bc 67EEA67A 		vmul.f32	s15, s15, s13
 504              	.LBE82:
 505              	.LBE89:
  55:Grain.cpp     ****   return sample;
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 17


 506              		.loc 1 55 16 view .LVU141
 507 00c0 E7EE805A 		vfma.f32	s11, s15, s0
 508              	.LVL27:
  56:Grain.cpp     **** }
 509              		.loc 1 56 3 is_stmt 1 view .LVU142
  56:Grain.cpp     **** }
 510              		.loc 1 56 10 is_stmt 0 view .LVU143
 511 00c4 8DED046A 		vstr.32	s12, [sp, #16]
 512 00c8 CDED055A 		vstr.32	s11, [sp, #20]
 513 00cc A6E7     		b	.L13
 514              	.L25:
 515 00ce 00BF     		.align	2
 516              	.L24:
 517 00d0 00000000 		.word	.LANCHOR0
 518 00d4 00000000 		.word	.LANCHOR1
 519 00d8 00000038 		.word	939524096
 520 00dc 00000000 		.word	.LANCHOR2
 521              		.cfi_endproc
 522              	.LFE4876:
 524              		.section	.text._ZN5Grain11SetSpawnPosEj,"ax",%progbits
 525              		.align	1
 526              		.global	_ZN5Grain11SetSpawnPosEj
 527              		.syntax unified
 528              		.thumb
 529              		.thumb_func
 531              	_ZN5Grain11SetSpawnPosEj:
 532              	.LVL28:
 533              	.LFB4878:
  69:Grain.cpp     **** void Grain::SetGrainSize(size_t grain_size) { grain_size_ = grain_size; }
 534              		.loc 1 69 42 is_stmt 1 view -0
 535              		.cfi_startproc
 536              		@ args = 0, pretend = 0, frame = 0
 537              		@ frame_needed = 0, uses_anonymous_args = 0
 538              		@ link register save eliminated.
  69:Grain.cpp     **** void Grain::SetGrainSize(size_t grain_size) { grain_size_ = grain_size; }
 539              		.loc 1 69 44 view .LVU145
  69:Grain.cpp     **** void Grain::SetGrainSize(size_t grain_size) { grain_size_ = grain_size; }
 540              		.loc 1 69 55 is_stmt 0 view .LVU146
 541 0000 0161     		str	r1, [r0, #16]
  69:Grain.cpp     **** void Grain::SetGrainSize(size_t grain_size) { grain_size_ = grain_size; }
 542              		.loc 1 69 68 view .LVU147
 543 0002 7047     		bx	lr
 544              		.cfi_endproc
 545              	.LFE4878:
 547              		.section	.text._ZN5Grain12SetGrainSizeEj,"ax",%progbits
 548              		.align	1
 549              		.global	_ZN5Grain12SetGrainSizeEj
 550              		.syntax unified
 551              		.thumb
 552              		.thumb_func
 554              	_ZN5Grain12SetGrainSizeEj:
 555              	.LVL29:
 556              	.LFB4879:
  70:Grain.cpp     **** void Grain::SetPitchRatio(float pitch_ratio) { pitch_ratio_ = pitch_ratio; }
 557              		.loc 1 70 45 is_stmt 1 view -0
 558              		.cfi_startproc
 559              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 18


 560              		@ frame_needed = 0, uses_anonymous_args = 0
 561              		@ link register save eliminated.
  70:Grain.cpp     **** void Grain::SetPitchRatio(float pitch_ratio) { pitch_ratio_ = pitch_ratio; }
 562              		.loc 1 70 47 view .LVU149
  70:Grain.cpp     **** void Grain::SetPitchRatio(float pitch_ratio) { pitch_ratio_ = pitch_ratio; }
 563              		.loc 1 70 59 is_stmt 0 view .LVU150
 564 0000 4161     		str	r1, [r0, #20]
  70:Grain.cpp     **** void Grain::SetPitchRatio(float pitch_ratio) { pitch_ratio_ = pitch_ratio; }
 565              		.loc 1 70 73 view .LVU151
 566 0002 7047     		bx	lr
 567              		.cfi_endproc
 568              	.LFE4879:
 570              		.section	.text._ZN5Grain13SetPitchRatioEf,"ax",%progbits
 571              		.align	1
 572              		.global	_ZN5Grain13SetPitchRatioEf
 573              		.syntax unified
 574              		.thumb
 575              		.thumb_func
 577              	_ZN5Grain13SetPitchRatioEf:
 578              	.LVL30:
 579              	.LFB4880:
 580              		.loc 1 71 46 is_stmt 1 view -0
 581              		.cfi_startproc
 582              		@ args = 0, pretend = 0, frame = 0
 583              		@ frame_needed = 0, uses_anonymous_args = 0
 584              		@ link register save eliminated.
 585              		.loc 1 71 48 view .LVU153
 586              		.loc 1 71 61 is_stmt 0 view .LVU154
 587 0000 80ED060A 		vstr.32	s0, [r0, #24]
 588              		.loc 1 71 76 view .LVU155
 589 0004 7047     		bx	lr
 590              		.cfi_endproc
 591              	.LFE4880:
 593              		.global	_ZN5Grain11decay_rate_E
 594              		.global	_ZN5Grain12start_decay_E
 595              		.global	_ZN5Grain10right_buf_E
 596              		.global	_ZN5Grain9left_buf_E
 597              		.global	_ZN5Grain10audio_len_E
 598              		.section	.bss._ZN5Grain10audio_len_E,"aw",%nobits
 599              		.align	2
 600              		.set	.LANCHOR0,. + 0
 603              	_ZN5Grain10audio_len_E:
 604 0000 00000000 		.space	4
 605              		.section	.bss._ZN5Grain10right_buf_E,"aw",%nobits
 606              		.align	2
 607              		.set	.LANCHOR2,. + 0
 610              	_ZN5Grain10right_buf_E:
 611 0000 00000000 		.space	4
 612              		.section	.bss._ZN5Grain9left_buf_E,"aw",%nobits
 613              		.align	2
 614              		.set	.LANCHOR1,. + 0
 617              	_ZN5Grain9left_buf_E:
 618 0000 00000000 		.space	4
 619              		.section	.rodata._ZN5Grain11decay_rate_E,"a"
 620              		.align	2
 623              	_ZN5Grain11decay_rate_E:
 624 0000 0000A040 		.word	1084227584
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 19


 625              		.section	.rodata._ZN5Grain12start_decay_E,"a"
 626              		.align	2
 629              	_ZN5Grain12start_decay_E:
 630 0000 CDCC4C3F 		.word	1061997773
 631              		.text
 632              	.Letext0:
 633              		.file 5 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/machine/_default_types.h"
 634              		.file 6 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/_stdint.h"
 635              		.file 7 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/stdint.h"
 636              		.file 8 "/Library/DaisyToolchain/0.2.0/arm/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 637              		.file 9 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cmath"
 638              		.file 10 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/std_abs.h"
 639              		.file 11 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdlib"
 640              		.file 12 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdint"
 641              		.file 13 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/type_traits"
 642              		.file 14 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/debug/debug.h"
 643              		.file 15 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/arm-none-eabi/thumb/v
 644              		.file 16 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/algorithmfwd.h"
 645              		.file 17 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/stl_pair.h"
 646              		.file 18 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/exception_ptr.h"
 647              		.file 19 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdarg"
 648              		.file 20 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstdio"
 649              		.file 21 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cstring"
 650              		.file 22 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/cwchar"
 651              		.file 23 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/clocale"
 652              		.file 24 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/basic_string.h"
 653              		.file 25 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/stl_iterator.h"
 654              		.file 26 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/bits/predefined_ops.h
 655              		.file 27 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/_types.h"
 656              		.file 28 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/reent.h"
 657              		.file 29 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/sys/lock.h"
 658              		.file 30 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/math.h"
 659              		.file 31 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/stdlib.h"
 660              		.file 32 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/math.h"
 661              		.file 33 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/c++/10.3.1/stdlib.h"
 662              		.file 34 "../libDaisy/src/util/wav_format.h"
 663              		.file 35 "../libDaisy/src/dev/max11300.h"
 664              		.file 36 "../libDaisy/src/daisy_seed.h"
 665              		.file 37 "/Library/DaisyToolchain/0.2.0/arm/lib/gcc/arm-none-eabi/10.3.1/include/stdarg.h"
 666              		.file 38 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/stdio.h"
 667              		.file 39 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/string.h"
 668              		.file 40 "../DaisySP/Source/Control/adenv.h"
 669              		.file 41 "../DaisySP/Source/Utility/dsp.h"
 670              		.file 42 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/wchar.h"
 671              		.file 43 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/time.h"
 672              		.file 44 "/Library/DaisyToolchain/0.2.0/arm/arm-none-eabi/include/locale.h"
 673              		.file 45 "../DaisySP/Source/Effects/../../../src/sample.h"
 674              		.file 46 "../libDaisy/src/dev/sr_595.h"
 675              		.file 47 "Grain.h"
 676              		.file 48 "<built-in>"
ARM GAS  /var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s 			page 20


DEFINED SYMBOLS
                            *ABS*:0000000000000000 Grain.cpp
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:19     .text._ZN5Grain4InitEv:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:25     .text._ZN5Grain4InitEv:0000000000000000 _ZN5Grain4InitEv
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:65     .text._ZN5Grain4InitEv:000000000000001c $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:70     .text._ZN5Grain7TriggerEjjf:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:76     .text._ZN5Grain7TriggerEjjf:0000000000000000 _ZN5Grain7TriggerEjjf
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:178    .text._ZN5Grain7TriggerEjjf:0000000000000030 $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:183    .text._ZN5Grain13ApplyEnvelopeEf:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:189    .text._ZN5Grain13ApplyEnvelopeEf:0000000000000000 _ZN5Grain13ApplyEnvelopeEf
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:260    .text._ZN5Grain13ApplyEnvelopeEf:0000000000000040 $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:269    .text._ZN5Grain7ProcessE6Sample:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:275    .text._ZN5Grain7ProcessE6Sample:0000000000000000 _ZN5Grain7ProcessE6Sample
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:517    .text._ZN5Grain7ProcessE6Sample:00000000000000d0 $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:525    .text._ZN5Grain11SetSpawnPosEj:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:531    .text._ZN5Grain11SetSpawnPosEj:0000000000000000 _ZN5Grain11SetSpawnPosEj
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:548    .text._ZN5Grain12SetGrainSizeEj:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:554    .text._ZN5Grain12SetGrainSizeEj:0000000000000000 _ZN5Grain12SetGrainSizeEj
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:571    .text._ZN5Grain13SetPitchRatioEf:0000000000000000 $t
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:577    .text._ZN5Grain13SetPitchRatioEf:0000000000000000 _ZN5Grain13SetPitchRatioEf
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:623    .rodata._ZN5Grain11decay_rate_E:0000000000000000 _ZN5Grain11decay_rate_E
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:629    .rodata._ZN5Grain12start_decay_E:0000000000000000 _ZN5Grain12start_decay_E
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:610    .bss._ZN5Grain10right_buf_E:0000000000000000 _ZN5Grain10right_buf_E
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:617    .bss._ZN5Grain9left_buf_E:0000000000000000 _ZN5Grain9left_buf_E
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:603    .bss._ZN5Grain10audio_len_E:0000000000000000 _ZN5Grain10audio_len_E
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:599    .bss._ZN5Grain10audio_len_E:0000000000000000 $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:606    .bss._ZN5Grain10right_buf_E:0000000000000000 $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:613    .bss._ZN5Grain9left_buf_E:0000000000000000 $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:620    .rodata._ZN5Grain11decay_rate_E:0000000000000000 $d
/var/folders/2p/02m_5p7958535cp2tpgps0400000gn/T//cclaxk7F.s:626    .rodata._ZN5Grain12start_decay_E:0000000000000000 $d

NO UNDEFINED SYMBOLS
